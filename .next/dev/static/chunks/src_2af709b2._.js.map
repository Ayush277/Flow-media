{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/ui/GlowCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { motion, useMotionTemplate, useMotionValue } from \"framer-motion\";\nimport { MouseEvent } from \"react\";\n\nexport function GlowCard({ children, className }: { children: React.ReactNode; className?: string }) {\n    const mouseX = useMotionValue(0);\n    const mouseY = useMotionValue(0);\n\n    function handleMouseMove({ currentTarget, clientX, clientY }: MouseEvent) {\n        const { left, top } = currentTarget.getBoundingClientRect();\n        mouseX.set(clientX - left);\n        mouseY.set(clientY - top);\n    }\n\n    return (\n        <div\n            className={cn(\n                \"group relative border border-white/10 bg-gray-900/40 overflow-hidden\",\n                className\n            )}\n            onMouseMove={handleMouseMove}\n        >\n            <motion.div\n                className=\"pointer-events-none absolute -inset-px opacity-0 transition duration-300 group-hover:opacity-100\"\n                style={{\n                    background: useMotionTemplate`\n            radial-gradient(\n              650px circle at ${mouseX}px ${mouseY}px,\n              rgba(124, 58, 237, 0.15),\n              transparent 80%\n            )\n          `,\n                }}\n            />\n            <div className=\"relative h-full\">{children}</div>\n        </div>\n    );\n}\n"],"names":["cn","motion","useMotionTemplate","useMotionValue","MouseEvent","GlowCard","children","className","React","ReactNode","mouseX","mouseY","handleMouseMove","currentTarget","clientX","clientY","left","top","getBoundingClientRect","set","background"],"mappings":";;;;;AAEA,SAASA,EAAE,QAAQ,aAAa;AAChC,SAASC,MAAM,EAAEC,iBAAiB,EAAEC,cAAc,QAAQ,eAAe;;;;;AAHzE,YAAY;;;AAML,kBAAkB,EAAEG,QAAQ,EAAEC,SAAAA,EAA8D,EAAE;;IACjG,MAAMG,MAAM,gNAAkB,CAAC,CAAC;IAChC,MAAMC,MAAM,gNAAkB,CAAC,CAAC;IAEhC,SAASC,eAAeA,CAAC,EAAEC,aAAa,EAAEC,OAAO,EAAEC,OAAAA,EAAqB,EAAE;QACtE,MAAM,EAAEC,IAAI,EAAEC,GAAAA,EAAK,GAAGJ,aAAa,CAACK,qBAAqB,CAAC,CAAC;QAC3DR,MAAM,CAACS,GAAG,CAACL,OAAO,GAAGE,IAAI,CAAC;QAC1BL,MAAM,CAACQ,GAAG,CAACJ,OAAO,GAAGE,GAAG,CAAC;IAC7B;IAEA,qBACI,6LAAC,GAAG;QACA,SAAS,CAAC,KAACjB,4HAAE,EACT,sEAAsE,EACtEO,SACJ,CAAC,CAAC;QACF,WAAW,CAAC,CAACK,eAAe,CAAC;;0BAE7B,6LAAC,uMAAM,CAAC,GAAG;gBACP,SAAS,EAAC,kGAAkG;gBAC5G,KAAK,CAAC,CAAC;oBACHQ,UAAU,EAAElB,6MAAiB,CAAA;;8BAEjD,EAAgCQ,MAAM,CAAA,GAAA,EAAMC,MAAM,CAAA;;;;UAIlD,CAAA;gBACgB,CAAC,CAAC;;;;;;0BAEN,6LAAC,GAAG;gBAAC,SAAS,EAAC,iBAAiB,CAAC;0BAACL,QAAQ,CAAC,EAAE,GAAG;;;;;;;;;;;;AAG5D;;;QAhCmBH,uMAAc;QACdA,uMAAc;;;KAFjBE,QAAQA","ignoreList":[]}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/CreatePost.tsx"],"sourcesContent":["\"use client\";\n\nimport { GlowCard } from \"@/components/ui/GlowCard\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { cn } from \"@/lib/utils\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Image as ImageIcon, Loader2, Send, X } from \"lucide-react\";\nimport { useRef, useState } from \"react\";\n\nexport function CreatePost({ onPostCreated }: { onPostCreated?: () => void }) {\n    const [content, setContent] = useState(\"\");\n    const [selectedImage, setSelectedImage] = useState<File | null>(null);\n    const [imagePreview, setImagePreview] = useState<string | null>(null);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const supabase = createClient();\n\n    const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setSelectedImage(file);\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setImagePreview(reader.result as string);\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const removeImage = () => {\n        setSelectedImage(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n    };\n\n    const handleSubmit = async () => {\n        if (!content.trim() && !selectedImage) return;\n\n        setIsSubmitting(true);\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) throw new Error(\"Not authenticated\");\n\n            let imageUrl = null;\n\n            // Upload Image if exists\n            if (selectedImage) {\n                const fileExt = selectedImage.name.split('.').pop();\n                const fileName = `${user.id}/${Math.random()}.${fileExt}`;\n                const { error: uploadError } = await supabase.storage\n                    .from('post-images')\n                    .upload(fileName, selectedImage);\n\n                if (uploadError) throw uploadError;\n\n                const { data: { publicUrl } } = supabase.storage\n                    .from('post-images')\n                    .getPublicUrl(fileName);\n\n                imageUrl = publicUrl;\n            }\n\n            // Insert Post\n            const { data: post, error: postError } = await supabase\n                .from('posts')\n                .insert({\n                    user_id: user.id,\n                    content,\n                    image_url: imageUrl\n                })\n                .select()\n                .single();\n\n            if (postError) throw postError;\n\n            // Reset Form\n            setContent(\"\");\n            removeImage();\n            if (onPostCreated) onPostCreated();\n\n        } catch (error) {\n            console.error(\"Error creating post:\", error);\n            alert(\"Failed to post. Please try again.\");\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <div className=\"mb-8 px-4 md:px-0\">\n            <GlowCard className=\"rounded-3xl p-1 backdrop-blur-xl border-white/5\">\n                <div className=\"bg-black/40 rounded-[22px] p-4\">\n                    <div className=\"flex gap-4\">\n                        <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 shrink-0\" />\n                        <div className=\"flex-1\">\n                            <textarea\n                                value={content}\n                                onChange={(e) => setContent(e.target.value)}\n                                placeholder=\"Share your flow...\"\n                                className=\"w-full bg-transparent border-none focus:ring-0 text-lg placeholder:text-muted-foreground/50 resize-none min-h-[60px]\"\n                            />\n\n                            <AnimatePresence>\n                                {imagePreview && (\n                                    <motion.div\n                                        initial={{ opacity: 0, height: 0 }}\n                                        animate={{ opacity: 1, height: \"auto\" }}\n                                        exit={{ opacity: 0, height: 0 }}\n                                        className=\"relative rounded-xl overflow-hidden mb-4 group\"\n                                    >\n                                        <img src={imagePreview} alt=\"Preview\" className=\"w-full max-h-[300px] object-cover rounded-xl\" />\n                                        <button\n                                            onClick={removeImage}\n                                            className=\"absolute top-2 right-2 p-1.5 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors\"\n                                        >\n                                            <X className=\"h-4 w-4\" />\n                                        </button>\n                                    </motion.div>\n                                )}\n                            </AnimatePresence>\n\n                            <div className=\"flex items-center justify-between mt-2 pt-2 border-t border-white/5\">\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        onClick={() => fileInputRef.current?.click()}\n                                        className=\"p-2 text-primary hover:bg-primary/10 rounded-full transition-colors\"\n                                    >\n                                        <ImageIcon className=\"h-5 w-5\" />\n                                    </button>\n                                    <input\n                                        type=\"file\"\n                                        ref={fileInputRef}\n                                        className=\"hidden\"\n                                        accept=\"image/*\"\n                                        onChange={handleImageSelect}\n                                    />\n                                </div>\n                                <button\n                                    onClick={handleSubmit}\n                                    disabled={(!content.trim() && !selectedImage) || isSubmitting}\n                                    className={cn(\n                                        \"px-4 py-2 rounded-full font-bold text-sm flex items-center gap-2 transition-all\",\n                                        (content.trim() || selectedImage) && !isSubmitting\n                                            ? \"bg-primary text-white hover:opacity-90\"\n                                            : \"bg-white/5 text-muted-foreground cursor-not-allowed\"\n                                    )}\n                                >\n                                    {isSubmitting ? (\n                                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                    ) : (\n                                        <>\n                                            Post Flow\n                                            <Send className=\"h-3.5 w-3.5\" />\n                                        </>\n                                    )}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </GlowCard>\n        </div>\n    );\n}\n"],"names":["GlowCard","createClient","cn","AnimatePresence","motion","Image","ImageIcon","Loader2","Send","X","useRef","useState","CreatePost","onPostCreated","content","setContent","selectedImage","setSelectedImage","File","imagePreview","setImagePreview","isSubmitting","setIsSubmitting","fileInputRef","HTMLInputElement","supabase","handleImageSelect","e","React","ChangeEvent","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","removeImage","current","value","handleSubmit","trim","data","user","auth","getUser","Error","imageUrl","fileExt","name","split","pop","fileName","id","Math","random","error","uploadError","storage","from","upload","publicUrl","getPublicUrl","post","postError","insert","user_id","image_url","select","single","console","alert","opacity","height","click"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/CommentDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { createClient } from \"@/lib/supabase/client\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Loader2, Send, X } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\n\ninterface Comment {\n    id: string;\n    content: string;\n    created_at: string;\n    user_id: string;\n    profiles: {\n        username: string;\n        full_name: string;\n        avatar_url: string;\n    };\n}\n\ninterface CommentDrawerProps {\n    postId: string;\n    isOpen: boolean;\n    onClose: () => void;\n    onCommentAdded?: () => void;\n}\n\nexport function CommentDrawer({ postId, isOpen, onClose, onCommentAdded }: CommentDrawerProps) {\n    const [comments, setComments] = useState<Comment[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [newComment, setNewComment] = useState(\"\");\n    const [submitting, setSubmitting] = useState(false);\n    const supabase = createClient();\n\n    const fetchComments = async () => {\n        try {\n            const { data, error } = await supabase\n                .from('comments')\n                .select(`\n                    id,\n                    content,\n                    created_at,\n                    user_id,\n                    profiles (username, full_name, avatar_url)\n                `)\n                .eq('post_id', postId)\n                .order('created_at', { ascending: true });\n\n            if (error) throw error;\n            // @ts-ignore\n            setComments(data || []);\n        } catch (error) {\n            console.error(\"Error fetching comments:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            setLoading(true);\n            fetchComments();\n\n            // Realtime subscription for new comments on this post\n            const channel = supabase\n                .channel(`comments-${postId}`)\n                .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'comments', filter: `post_id=eq.${postId}` }, (payload) => {\n                    // Fetch again to get profile data relations\n                    fetchComments();\n                })\n                .subscribe();\n\n            return () => {\n                supabase.removeChannel(channel);\n            };\n        }\n    }, [isOpen, postId]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!newComment.trim()) return;\n\n        setSubmitting(true);\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) throw new Error(\"Not authenticated\");\n\n            const { error } = await supabase\n                .from('comments')\n                .insert({\n                    post_id: postId,\n                    user_id: user.id,\n                    content: newComment.trim()\n                });\n\n            if (error) throw error;\n\n            setNewComment(\"\");\n            if (onCommentAdded) onCommentAdded();\n\n            // We rely on realtime or fetch fetchComments() called by realtime listener \n            // But to be instant for the user:\n            await fetchComments();\n\n        } catch (error) {\n            console.error(\"Error posting comment:\", error);\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    return (\n        <AnimatePresence>\n            {isOpen && (\n                <>\n                    {/* Backdrop */}\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        onClick={onClose}\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50\"\n                    />\n\n                    {/* Drawer */}\n                    <motion.div\n                        initial={{ x: \"100%\" }}\n                        animate={{ x: 0 }}\n                        exit={{ x: \"100%\" }}\n                        transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\n                        className=\"fixed inset-y-0 right-0 z-50 w-full max-w-md bg-neutral-900 border-l border-white/10 shadow-2xl flex flex-col\"\n                    >\n                        {/* Header */}\n                        <div className=\"flex items-center justify-between p-4 border-b border-white/5 bg-neutral-900/50 backdrop-blur-md\">\n                            <h3 className=\"font-bold text-lg\">Comments</h3>\n                            <button\n                                onClick={onClose}\n                                className=\"p-2 hover:bg-white/10 rounded-full transition-colors\"\n                            >\n                                <X className=\"h-5 w-5\" />\n                            </button>\n                        </div>\n\n                        {/* Comments List */}\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar\">\n                            {loading ? (\n                                <div className=\"flex justify-center py-8\">\n                                    <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n                                </div>\n                            ) : comments.length > 0 ? (\n                                comments.map((comment) => (\n                                    <div key={comment.id} className=\"flex gap-3 group\">\n                                        <div className=\"shrink-0 h-8 w-8 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 overflow-hidden\">\n                                            {comment.profiles?.avatar_url ? (\n                                                <img src={comment.profiles.avatar_url} alt={comment.profiles.username} className=\"w-full h-full object-cover\" />\n                                            ) : (\n                                                <div className=\"w-full h-full flex items-center justify-center text-xs font-bold text-white\">\n                                                    {comment.profiles?.full_name?.[0] || \"?\"}\n                                                </div>\n                                            )}\n                                        </div>\n                                        <div className=\"flex-1 space-y-1\">\n                                            <div className=\"flex items-baseline gap-2\">\n                                                <span className=\"text-sm font-bold text-white\">{comment.profiles?.full_name}</span>\n                                                <span className=\"text-xs text-muted-foreground\">{new Date(comment.created_at).toLocaleDateString()}</span>\n                                            </div>\n                                            <p className=\"text-sm text-gray-300 leading-relaxed\">{comment.content}</p>\n                                        </div>\n                                    </div>\n                                ))\n                            ) : (\n                                <div className=\"text-center py-12 text-muted-foreground\">\n                                    <p>No comments yet.</p>\n                                    <p className=\"text-sm\">Be the first to start the conversation.</p>\n                                </div>\n                            )}\n                        </div>\n\n                        {/* Input Area */}\n                        <div className=\"p-4 bg-neutral-900 border-t border-white/5\">\n                            <form onSubmit={handleSubmit} className=\"relative flex items-center gap-2\">\n                                <input\n                                    type=\"text\"\n                                    value={newComment}\n                                    onChange={(e) => setNewComment(e.target.value)}\n                                    placeholder=\"Write a comment...\"\n                                    className=\"w-full bg-white/5 border border-white/10 rounded-full pl-4 pr-12 py-3 focus:outline-none focus:border-primary/50 text-sm transition-colors\"\n                                />\n                                <button\n                                    type=\"submit\"\n                                    disabled={!newComment.trim() || submitting}\n                                    className=\"absolute right-2 p-1.5 bg-primary text-white rounded-full disabled:opacity-50 disabled:bg-transparent disabled:text-muted-foreground hover:bg-primary/90 transition-all\"\n                                >\n                                    {submitting ? (\n                                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                    ) : (\n                                        <Send className=\"h-4 w-4 ml-0.5\" />\n                                    )}\n                                </button>\n                            </form>\n                        </div>\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n}\n"],"names":["createClient","AnimatePresence","motion","Loader2","Send","X","useEffect","useState","Comment","id","content","created_at","user_id","profiles","username","full_name","avatar_url","CommentDrawerProps","postId","isOpen","onClose","onCommentAdded","CommentDrawer","comments","setComments","loading","setLoading","newComment","setNewComment","submitting","setSubmitting","supabase","fetchComments","data","error","from","select","eq","order","ascending","console","channel","on","event","schema","table","filter","payload","subscribe","removeChannel","handleSubmit","e","React","FormEvent","preventDefault","trim","user","auth","getUser","Error","insert","post_id","opacity","x","type","damping","stiffness","length","map","comment","Date","toLocaleDateString","target","value"],"mappings":";;;;;AAEA,SAASA,YAAY,QAAQ,uBAAuB;AACpD,SAASC,eAAe,EAAEC,MAAM,QAAQ,eAAe;;AACvD,SAASC,OAAO,EAAEC,IAAI,EAAEC,CAAC,QAAQ,cAAc;;;AAC/C,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;;AAL3C,YAAY;;;;;AA0BL,uBAAuB,EAAEW,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,cAAAA,EAAoC,EAAE;;IAC3F,MAAM,CAACE,QAAQ,EAAEC,WAAW,CAAC,OAAGjB,yKAAQ,CAACC,CAAW,EAAE,CAAC,GAAP,EAAE,CAAC;IACnD,MAAM,CAACiB,OAAO,EAAEC,UAAU,CAAC,OAAGnB,yKAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,OAAGrB,yKAAQ,EAAC,EAAE,CAAC;IAChD,MAAM,CAACsB,UAAU,EAAEC,aAAa,CAAC,OAAGvB,yKAAQ,EAAC,KAAK,CAAC;IACnD,MAAMwB,QAAQ,OAAG/B,mJAAY,CAAC,CAAC;IAE/B,MAAMgC,aAAa,GAAG,MAAAA,CAAA,KAAY;QAC9B,IAAI;YACA,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAMH,QAAQ,CACjCI,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,CAAA;;;;;;gBAMxB,CAAiB,CAAC,CACDC,EAAE,CAAC,SAAS,EAAEnB,MAAM,CAAC,CACrBoB,KAAK,CAAC,YAAY,EAAE;gBAAEC,SAAS,EAAE;YAAK,CAAC,CAAC;YAE7C,IAAIL,OAAK,EAAE,MAAMA,OAAK;YACtB,aAAA;YACAV,WAAW,CAACS,IAAI,IAAI,EAAE,CAAC;QAC3B,CAAC,CAAC,OAAOC,KAAK,EAAE;YACZM,OAAO,CAACN,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QACpD,CAAC,QAAS;YACNR,UAAU,CAAC,KAAK,CAAC;QACrB;IACJ,CAAC;QAEDpB,0KAAS;mCAAC,MAAM;YACZ,IAAIa,MAAM,EAAE;gBACRO,UAAU,CAAC,IAAI,CAAC;gBAChBM,aAAa,CAAC,CAAC;gBAEf,sDAAA;gBACA,MAAMS,OAAO,GAAGV,QAAQ,CACnBU,OAAO,CAAC,CAAA,SAAA,EAAYvB,MAAM,EAAE,CAAC,CAC7BwB,EAAE,CAAC,kBAAkB,EAAE;oBAAEC,KAAK,EAAE,QAAQ;oBAAEC,MAAM,EAAE,QAAQ;oBAAEC,KAAK,EAAE,UAAU;oBAAEC,MAAM,EAAE,CAAA,WAAA,EAAc5B,MAAM,EAAA;gBAAG,CAAC;wDAAG6B,OAAO,IAAK;wBAC3H,4CAAA;wBACAf,aAAa,CAAC,CAAC;oBACnB,CAAC,CAAC;sDACDgB,SAAS,CAAC,CAAC;gBAEhB;+CAAO,MAAM;wBACTjB,QAAQ,CAACkB,aAAa,CAACR,OAAO,CAAC;oBACnC,CAAC;;YACL;QACJ,CAAC;kCAAE;QAACtB,MAAM;QAAED,MAAM;KAAC,CAAC;IAEpB,MAAMgC,YAAY,GAAG,MAAAA,CAAOC,CAAC,EAAEC,KAAK,CAACC,SAAS,KAAK;QAC/CF,CAAC,CAACG,cAAc,CAAC,CAAC;QAClB,IAAI,CAAC3B,UAAU,CAAC4B,IAAI,CAAC,CAAC,EAAE;QAExBzB,aAAa,CAAC,IAAI,CAAC;QACnB,IAAI;YACA,MAAM,EAAEG,IAAI,EAAE,EAAEuB,IAAAA,EAAK,EAAG,GAAG,MAAMzB,QAAQ,CAAC0B,IAAI,CAACC,OAAO,CAAC,CAAC;YACxD,IAAI,CAACF,IAAI,EAAE,MAAM,IAAIG,KAAK,CAAC,mBAAmB,CAAC;YAE/C,MAAM,EAAEzB,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAMH,QAAQ,CAC3BI,IAAI,CAAC,UAAU,CAAC,CAChByB,MAAM,CAAC;gBACJC,OAAO,EAAE3C,MAAM;gBACfN,OAAO,EAAE4C,IAAI,CAAC/C,EAAE;gBAChBC,OAAO,EAAEiB,UAAU,CAAC4B,IAAI,CAAC;YAC7B,CAAC,CAAC;YAEN,IAAIrB,OAAK,EAAE,MAAMA,OAAK;YAEtBN,aAAa,CAAC,EAAE,CAAC;YACjB,IAAIP,cAAc,EAAEA,cAAc,CAAC,CAAC;YAEpC,4EAAA;YACA,kCAAA;YACA,MAAMW,aAAa,CAAC,CAAC;QAEzB,CAAC,CAAC,OAAOE,OAAK,EAAE;YACZM,OAAO,CAACN,KAAK,CAAC,wBAAwB,EAAEA,OAAK,CAAC;QAClD,CAAC,QAAS;YACNJ,aAAa,CAAC,KAAK,CAAC;QACxB;IACJ,CAAC;IAED,qBACI,6LAAC,+MAAe;kBACXX,MAAM,kBACH;;8BAEI,6LAAC,uMAAM,CAAC,GAAG;oBACP,OAAO,CAAC,CAAC;wBAAE2C,OAAO,EAAE;oBAAE,CAAC,CAAC;oBACxB,OAAO,CAAC,CAAC;wBAAEA,OAAO,EAAE;oBAAE,CAAC,CAAC;oBACxB,IAAI,CAAC,CAAC;wBAAEA,OAAO,EAAE;oBAAE,CAAC,CAAC;oBACrB,OAAO,CAAC,CAAC1C,OAAO,CAAC;oBACjB,SAAS,EAAC,iDAAiD;;;;;;8BAI/D,6LAAC,uMAAM,CAAC,GAAG;oBACP,OAAO,CAAC,CAAC;wBAAE2C,CAAC,EAAE;oBAAO,CAAC,CAAC;oBACvB,OAAO,CAAC,CAAC;wBAAEA,CAAC,EAAE;oBAAE,CAAC,CAAC;oBAClB,IAAI,CAAC,CAAC;wBAAEA,CAAC,EAAE;oBAAO,CAAC,CAAC;oBACpB,UAAU,CAAC,CAAC;wBAAEC,IAAI,EAAE,QAAQ;wBAAEC,OAAO,EAAE,EAAE;wBAAEC,SAAS,EAAE;oBAAI,CAAC,CAAC;oBAC5D,SAAS,EAAC,+GAA+G;;sCAGzH,6LAAC,GAAG;4BAAC,SAAS,EAAC,kGAAkG;;8CAC7G,6LAAC,EAAE;oCAAC,SAAS,EAAC,mBAAmB;8CAAC,QAAQ,EAAE,EAAE;;;;;;8CAC9C,6LAAC,MAAM;oCACH,OAAO,CAAC,CAAC9C,OAAO,CAAC;oCACjB,SAAS,EAAC,sDAAsD;4DAEhE,6LAAC,oMAAC;wCAAC,SAAS,EAAC,SAAS;;;;;;;;;;;;;;;;;sCAK9B,6LAAC,GAAG;4BAAC,SAAS,EAAC,mDAAmD;sCAC7DK,OAAO,iBACJ,6LAAC,GAAG;gCAAC,SAAS,EAAC,0BAA0B;wDACrC,6LAAC,+NAAO;oCAAC,SAAS,EAAC,mCAAmC;;;;;;;;;;uCAE1DF,QAAQ,CAAC4C,MAAM,GAAG,CAAC,GACnB5C,QAAQ,CAAC6C,GAAG,EAAEC,OAAO,iBACjB,6LAAC,GAAG,CAAC,GAAG,CAAC;oCAAa,SAAS,EAAC,kBAAkB;;sDAC9C,6LAAC,GAAG;4CAAC,SAAS,EAAC,2FAA2F;sDACrGA,OAAO,CAACxD,QAAQ,EAAEG,UAAU,iBACzB,6LAAC,GAAG;gDAAC,GAAG,CAAC,CAACqD,OAAO,CAACxD,QAAQ,CAACG,UAAU,CAAC;gDAAC,GAAG,CAAC,CAACqD,OAAO,CAACxD,QAAQ,CAACC,QAAQ,CAAC;gDAAC,SAAS,EAAC,4BAA4B,GAAG;;;;;qEAEhH,6LAAC,GAAG;gDAAC,SAAS,EAAC,6EAA6E;0DACvFuD,OAAO,CAACxD,QAAQ,EAAEE,SAAS,EAAA,CAAG,CAAC,CAAC,IAAI,GAAG;;;;;;;;;;;sDAIpD,6LAAC,GAAG;4CAAC,SAAS,EAAC,kBAAkB;;8DAC7B,6LAAC,GAAG;oDAAC,SAAS,EAAC,2BAA2B;;sEACtC,6LAAC,IAAI;4DAAC,SAAS,EAAC,8BAA8B,CAAC;sEAACsD,OAAO,CAACxD,QAAQ,EAAEE,SAAS,CAAC,EAAE,IAAI;;;;;;sEAClF,6LAAC,IAAI;4DAAC,SAAS,EAAC,+BAA+B,CAAC;sEAAC,IAAIuD,IAAI,CAACD,OAAO,CAAC1D,UAAU,CAAC,CAAC4D,kBAAkB,CAAC,CAAC,CAAC,EAAE,IAAI;;;;;;;;;;;;8DAE7G,6LAAC,CAAC;oDAAC,SAAS,EAAC,uCAAuC,CAAC;8DAACF,OAAO,CAAC3D,OAAO,CAAC,EAAE,CAAC;;;;;;;;;;;;;mCAfvE2D,OAAO,CAAC5D,EAAE,CAAC;;;;0DAoBzB,6LAAC,GAAG;gCAAC,SAAS,EAAC,yCAAyC;;kDACpD,6LAAC,CAAC;kDAAC,gBAAgB,EAAE,CAAC;;;;;;kDACtB,6LAAC,CAAC;wCAAC,SAAS,EAAC,SAAS;kDAAC,uCAAuC,EAAE,CAAC;;;;;;;;;;;;;;;;;sCAM7E,6LAAC,GAAG;4BAAC,SAAS,EAAC,4CAA4C;oDACvD,6LAAC,IAAI;gCAAC,QAAQ,CAAC,CAACyC,YAAY,CAAC;gCAAC,SAAS,EAAC,kCAAkC;;kDACtE,6LAAC,KAAK;wCACF,IAAI,EAAC,MAAM;wCACX,KAAK,CAAC,CAACvB,UAAU,CAAC;wCAClB,QAAQ,CAAC,EAAEwB,GAAC,GAAKvB,aAAa,CAACuB,GAAC,CAACqB,MAAM,CAACC,KAAK,CAAC,CAAC;wCAC/C,WAAW,EAAC,oBAAoB;wCAChC,SAAS,EAAC,4IAA4I;;;;;;kDAE1J,6LAAC,MAAM;wCACH,IAAI,EAAC,QAAQ;wCACb,QAAQ,CAAC,CAAC,CAAC9C,UAAU,CAAC4B,IAAI,CAAC,CAAC,IAAI1B,UAAU,CAAC;wCAC3C,SAAS,EAAC,yKAAyK;kDAElLA,UAAU,iBACP,6LAAC,+NAAO;4CAAC,SAAS,EAAC,sBAAsB,GAAG;;;;;iEAE5C,6LAAC,6MAAI;4CAAC,SAAS,EAAC,gBAAgB,GACnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrC;;KAnLgBP,aAAaA","ignoreList":[]}},
    {"offset": {"line": 709, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/hooks/useFollow.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/client';\nimport { useCallback, useEffect, useState } from 'react';\n\nexport function useFollow(targetUserId: string, currentUserId?: string) {\n    const [isFollowing, setIsFollowing] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const supabase = createClient();\n\n    // Check status\n    useEffect(() => {\n        if (!currentUserId || !targetUserId || currentUserId === targetUserId) return;\n\n        const checkFollow = async () => {\n            const { data } = await supabase\n                .from('follows')\n                .select('*')\n                .eq('follower_id', currentUserId)\n                .eq('following_id', targetUserId)\n                .single();\n\n            if (data) setIsFollowing(true);\n        };\n\n        checkFollow();\n    }, [currentUserId, targetUserId]);\n\n    const toggleFollow = useCallback(async () => {\n        if (!currentUserId || !targetUserId || isLoading) return;\n\n        setIsLoading(true);\n        // Optimistic\n        const previousState = isFollowing;\n        setIsFollowing(!previousState);\n\n        try {\n            if (previousState) {\n                // Unfollow\n                const { error } = await supabase\n                    .from('follows')\n                    .delete()\n                    .eq('follower_id', currentUserId)\n                    .eq('following_id', targetUserId);\n                if (error) throw error;\n            } else {\n                // Follow\n                const { error } = await supabase\n                    .from('follows')\n                    .insert({\n                        follower_id: currentUserId,\n                        following_id: targetUserId\n                    });\n                if (error) throw error;\n            }\n        } catch (error) {\n            console.error(\"Error toggling follow:\", error);\n            setIsFollowing(previousState); // Revert\n        } finally {\n            setIsLoading(false);\n        }\n    }, [currentUserId, targetUserId, isFollowing, isLoading]);\n\n    return { isFollowing, toggleFollow, isLoading };\n}\n"],"names":["createClient","useCallback","useEffect","useState","useFollow","targetUserId","currentUserId","isFollowing","setIsFollowing","isLoading","setIsLoading","supabase","checkFollow","data","from","select","eq","single","toggleFollow","previousState","error","delete","insert","follower_id","following_id","console"],"mappings":";;;;AAAA,SAASA,YAAY,QAAQ,uBAAuB;AACpD,SAASC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;;;AAEjD,mBAAmBE,YAAY,AAAQ,EAAN,AAAQC,aAAsB,CAAR,CAAU,CAAR;;IAC5D,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,OAAGL,yKAAQ,EAAC,KAAK,CAAC;IACrD,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,OAAGP,yKAAQ,EAAC,KAAK,CAAC;IACjD,MAAMQ,QAAQ,OAAGX,mJAAY,CAAC,CAAC;IAE/B,eAAA;IACAE,8KAAS;+BAAC,MAAM;YACZ,IAAI,CAACI,aAAa,IAAI,CAACD,YAAY,IAAIC,aAAa,KAAKD,YAAY,EAAE;YAEvE,MAAMO,WAAW;mDAAG,MAAAA,CAAA,KAAY;oBAC5B,MAAM,EAAEC,IAAAA,EAAM,GAAG,MAAMF,QAAQ,CAC1BG,IAAI,CAAC,SAAS,CAAC,CACfC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,aAAa,EAAEV,aAAa,CAAC,CAChCU,EAAE,CAAC,cAAc,EAAEX,YAAY,CAAC,CAChCY,MAAM,CAAC,CAAC;oBAEb,IAAIJ,IAAI,EAAEL,cAAc,CAAC,IAAI,CAAC;gBAClC,CAAC;;YAEDI,WAAW,CAAC,CAAC;QACjB,CAAC;8BAAE;QAACN,aAAa;QAAED,YAAY;KAAC,CAAC;IAEjC,MAAMa,YAAY,OAAGjB,4KAAW;+CAAC,YAAY;YACzC,IAAI,CAACK,aAAa,IAAI,CAACD,YAAY,IAAII,SAAS,EAAE;YAElDC,YAAY,CAAC,IAAI,CAAC;YAClB,aAAA;YACA,MAAMS,aAAa,GAAGZ,WAAW;YACjCC,cAAc,CAAC,CAACW,aAAa,CAAC;YAE9B,IAAI;gBACA,IAAIA,aAAa,EAAE;oBACf,WAAA;oBACA,MAAM,EAAEC,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAMT,QAAQ,CAC3BG,IAAI,CAAC,SAAS,CAAC,CACfO,MAAM,CAAC,CAAC,CACRL,EAAE,CAAC,aAAa,EAAEV,aAAa,CAAC,CAChCU,EAAE,CAAC,cAAc,EAAEX,YAAY,CAAC;oBACrC,IAAIe,OAAK,EAAE,MAAMA,OAAK;gBAC1B,CAAC,MAAM;oBACH,SAAA;oBACA,MAAM,EAAEA,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAMT,QAAQ,CAC3BG,IAAI,CAAC,SAAS,CAAC,CACfQ,MAAM,CAAC;wBACJC,WAAW,EAAEjB,aAAa;wBAC1BkB,YAAY,EAAEnB;oBAClB,CAAC,CAAC;oBACN,IAAIe,OAAK,EAAE,MAAMA,OAAK;gBAC1B;YACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;gBACZK,OAAO,CAACL,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;gBAC9CZ,cAAc,CAACW,aAAa,CAAC,CAAC,CAAC,SAAA;YACnC,CAAC,QAAS;gBACNT,YAAY,CAAC,KAAK,CAAC;YACvB;QACJ,CAAC;8CAAE;QAACJ,aAAa;QAAED,YAAY;QAAEE,WAAW;QAAEE,SAAS;KAAC,CAAC;IAEzD,OAAO;QAAEF,WAAW;QAAEW,YAAY;QAAET;IAAU,CAAC;AACnD;GA3DgBL,SAASA","ignoreList":[]}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/FeedPost.tsx"],"sourcesContent":["import { CommentDrawer } from \"@/components/feed/CommentDrawer\";\nimport { useFollow } from \"@/hooks/useFollow\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { cn } from \"@/lib/utils\";\nimport { motion } from \"framer-motion\";\nimport { CheckCircle2, Heart, MessageCircle, MoreHorizontal, Share2, Zap } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\n\ninterface Task {\n    id: string;\n    text: string;\n    completed: boolean;\n}\n\ninterface PostProps {\n    id: string; // Post ID\n    userId: string; // Author ID\n    currentUserId?: string; // To check if liked\n    user: {\n        name: string;\n        handle: string;\n        avatar: string;\n    };\n    timestamp: string;\n    content: string;\n    tasks: Task[];\n    image?: string;\n    stats: {\n        likes: number;\n        comments: number;\n    };\n}\n\nexport function FeedPost({ id, userId, currentUserId, user, timestamp, content, tasks, image, stats }: PostProps) {\n    const supabase = createClient();\n    const [isLiked, setIsLiked] = useState(false);\n    const [likeCount, setLikeCount] = useState(stats.likes);\n    const [loadingLike, setLoadingLike] = useState(false);\n    const [isCommentsOpen, setIsCommentsOpen] = useState(false);\n\n    const { isFollowing, toggleFollow, isLoading: isFollowLoading } = useFollow(userId, currentUserId);\n    const isOwner = currentUserId === userId;\n\n    // Check if user already liked this post\n    useEffect(() => {\n        if (!currentUserId) return;\n\n        const checkLike = async () => {\n            const { data, error } = await supabase\n                .from('likes')\n                .select('*')\n                .eq('post_id', id)\n                .eq('user_id', currentUserId)\n                .single();\n\n            if (data) setIsLiked(true);\n        };\n\n        checkLike();\n    }, [currentUserId, id]);\n\n    const handleLike = async () => {\n        if (!currentUserId || loadingLike) return;\n\n        // Optimistic UI\n        const previousLiked = isLiked;\n        const previousCount = likeCount;\n\n        setIsLiked(!isLiked);\n        setLikeCount(prev => isLiked ? prev - 1 : prev + 1);\n        setLoadingLike(true);\n\n        try {\n            if (previousLiked) {\n                // Remove like\n                const { error } = await supabase\n                    .from('likes')\n                    .delete()\n                    .eq('post_id', id)\n                    .eq('user_id', currentUserId);\n                if (error) throw error;\n            } else {\n                // Add like\n                const { error } = await supabase\n                    .from('likes')\n                    .insert({ post_id: id, user_id: currentUserId });\n                if (error) throw error;\n            }\n        } catch (error) {\n            console.error(\"Error toggling like:\", error);\n            // Revert\n            setIsLiked(previousLiked);\n            setLikeCount(previousCount);\n        } finally {\n            setLoadingLike(false);\n        }\n    };\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            whileHover={{ scale: 1.005 }}\n            transition={{ duration: 0.2 }}\n            className=\"mb-6 px-4 md:px-0\"\n        >\n            <div className=\"relative group rounded-3xl bg-black/40 backdrop-blur-xl border border-white/5 overflow-hidden transition-all duration-300 hover:border-primary/30 hover:shadow-[0_0_30px_-10px_rgba(124,58,237,0.3)]\">\n                {/* Glowing Gradient Background on Hover */}\n                <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-purple-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none\" />\n\n                <div className=\"relative p-6\">\n                    <div className=\"flex gap-5\">\n                        {/* Avatar Column */}\n                        <div className=\"shrink-0\">\n                            <div className=\"h-14 w-14 rounded-2xl bg-gradient-to-br from-gray-800 to-black border border-white/10 flex items-center justify-center text-white font-bold shadow-lg relative overflow-hidden group/avatar cursor-pointer\">\n                                {user.avatar ? (\n                                    <img src={user.avatar} alt={user.name} className=\"w-full h-full object-cover\" />\n                                ) : (\n                                    <>\n                                        <div className=\"absolute inset-0 bg-primary/20 opacity-0 group-hover/avatar:opacity-100 transition-opacity\" />\n                                        <span className=\"relative z-10 text-lg\">{user.name[0]}</span>\n                                    </>\n                                )}\n                            </div>\n                        </div>\n\n                        {/* Content Column */}\n                        <div className=\"flex-1 min-w-0\">\n                            {/* Header */}\n                            <div className=\"flex justify-between items-start mb-3\">\n                                <div className=\"flex-1\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <h3 className=\"font-bold text-white text-lg leading-tight mb-0.5 hover:text-primary transition-colors cursor-pointer\">{user.name}</h3>\n                                        {!isOwner && (\n                                            <button\n                                                onClick={toggleFollow}\n                                                disabled={isFollowLoading}\n                                                className={cn(\n                                                    \"text-xs font-bold px-2 py-0.5 rounded-full transition-all border\",\n                                                    isFollowing\n                                                        ? \"border-white/20 text-muted-foreground hover:bg-red-500/10 hover:text-red-400 hover:border-red-500/20\"\n                                                        : \"bg-primary/10 text-primary border-primary/20 hover:bg-primary/20\"\n                                                )}\n                                            >\n                                                {isFollowing ? \"Following\" : \"Follow\"}\n                                            </button>\n                                        )}\n                                    </div>\n                                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                                        <span className=\"hover:text-white transition-colors cursor-pointer\">@{user.handle}</span>\n                                        <span className=\"w-1 h-1 rounded-full bg-white/20\" />\n                                        <span>{timestamp}</span>\n                                    </div>\n                                </div>\n                                <button className=\"text-muted-foreground hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors\">\n                                    <MoreHorizontal className=\"h-5 w-5\" />\n                                </button>\n                            </div>\n\n                            {/* Text Content */}\n                            <p className=\"text-gray-200 mb-5 whitespace-pre-wrap text-[16px] leading-relaxed font-normal tracking-wide\">\n                                {content}\n                            </p>\n\n                            {/* Tasks Module - Modern Card */}\n                            {tasks.length > 0 && (\n                                <div className=\"bg-white/5 rounded-2xl border border-white/5 overflow-hidden mb-5\">\n                                    <div className=\"px-4 py-2 bg-white/5 border-b border-white/5 flex items-center gap-2\">\n                                        <Zap className=\"h-3.5 w-3.5 text-primary\" />\n                                        <span className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground\">Flow Session</span>\n                                    </div>\n                                    {tasks.map((task, i) => (\n                                        <div\n                                            key={task.id}\n                                            className={cn(\n                                                \"flex items-center gap-3 p-3.5 transition-all duration-300 group/task cursor-default\",\n                                                i !== tasks.length - 1 && \"border-b border-white/5\",\n                                                task.completed ? \"bg-primary/5\" : \"hover:bg-white/5\"\n                                            )}\n                                        >\n                                            {task.completed ? (\n                                                <div className=\"h-5 w-5 rounded-full bg-primary/20 flex items-center justify-center shrink-0\">\n                                                    <CheckCircle2 className=\"h-3.5 w-3.5 text-primary\" />\n                                                </div>\n                                            ) : (\n                                                <div className=\"h-5 w-5 rounded-full border-2 border-white/20 group-hover/task:border-white/40 transition-colors shrink-0\" />\n                                            )}\n                                            <span className={cn(\"text-sm font-medium transition-colors\", task.completed ? \"text-muted-foreground line-through decoration-primary/50\" : \"text-gray-200 group-hover/task:text-white\")}>\n                                                {task.text}\n                                            </span>\n                                        </div>\n                                    ))}\n                                </div>\n                            )}\n\n                            {/* Image Proof - Cinematic */}\n                            {image && (\n                                <div className=\"relative rounded-2xl overflow-hidden mb-5 border border-white/10 shadow-2xl shadow-black/50 group/image cursor-pointer\">\n                                    <div className=\"absolute inset-0 bg-black/20 group-hover/image:bg-transparent transition-colors duration-500 z-10\" />\n                                    <img\n                                        src={image}\n                                        alt=\"Work Proof\"\n                                        className=\"w-full h-auto max-h-[500px] object-cover transform group-hover/image:scale-105 transition-transform duration-700 ease-out\"\n                                    />\n                                </div>\n                            )}\n\n                            {/* Action Bar - Modern Pills */}\n                            <div className=\"flex items-center gap-4 mt-2\">\n                                <button\n                                    onClick={(e) => {\n                                        e.stopPropagation();\n                                        handleLike();\n                                    }}\n                                    className={cn(\n                                        \"group flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300 border border-transparent\",\n                                        isLiked\n                                            ? \"bg-pink-500/10 text-pink-500 border-pink-500/20\"\n                                            : \"bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-white hover:border-white/10\"\n                                    )}\n                                >\n                                    <motion.div whileTap={{ scale: 0.8 }}>\n                                        <Heart className={cn(\"h-4 w-4 transition-transform group-hover:scale-110\", isLiked && \"fill-current\")} />\n                                    </motion.div>\n                                    <span className=\"text-sm font-bold\">{likeCount}</span>\n                                </button>\n\n                                <button\n                                    onClick={() => setIsCommentsOpen(true)}\n                                    className=\"group flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-white transition-all duration-300 border border-transparent hover:border-white/10\"\n                                >\n                                    <MessageCircle className=\"h-4 w-4 group-hover:scale-110 transition-transform\" />\n                                    <span className=\"text-sm font-bold\">{stats.comments}</span>\n                                </button>\n\n                                <button className=\"group flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-green-400 transition-all duration-300 border border-transparent hover:border-green-500/20 ml-auto\">\n                                    <Share2 className=\"h-4 w-4 group-hover:scale-110 transition-transform\" />\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <CommentDrawer\n                postId={id}\n                isOpen={isCommentsOpen}\n                onClose={() => setIsCommentsOpen(false)}\n                onCommentAdded={() => {\n                    // Start of future enhancement: Update local comment count\n                }}\n            />\n        </motion.div>\n    );\n}\n"],"names":["CommentDrawer","useFollow","createClient","cn","motion","CheckCircle2","Heart","MessageCircle","MoreHorizontal","Share2","Zap","useEffect","useState","Task","id","text","completed","PostProps","userId","currentUserId","user","name","handle","avatar","timestamp","content","tasks","image","stats","likes","comments","FeedPost","supabase","isLiked","setIsLiked","likeCount","setLikeCount","loadingLike","setLoadingLike","isCommentsOpen","setIsCommentsOpen","isFollowing","toggleFollow","isLoading","isFollowLoading","isOwner","checkLike","data","error","from","select","eq","single","handleLike","previousLiked","previousCount","prev","delete","insert","post_id","user_id","console","opacity","y","scale","duration","length","map","task","i","e","stopPropagation"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1281, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/StoriesSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { createClient } from \"@/lib/supabase/client\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Plus, UploadCloud, X } from \"lucide-react\";\nimport { useEffect, useRef, useState } from \"react\";\n\n// Types\ntype StoryType = 'image' | 'text';\n\ninterface Story {\n  id: string;\n  userId: string;\n  userName: string;\n  userAvatar: string;\n  content: string; // Image URL or Text content\n  type: StoryType;\n  bgColor?: 'black' | 'white' | 'gradient';\n  timestamp: string;\n}\n\ninterface UserWithStories {\n  userId: string;\n  userName: string;\n  userAvatar: string;\n  stories: Story[];\n  isCurrentUser?: boolean;\n}\n\nexport function StoriesSection() {\n  const [stories, setStories] = useState<UserWithStories[]>([]);\n  const [selectedUserIndex, setSelectedUserIndex] = useState<number | null>(null);\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\n  const [isCreating, setIsCreating] = useState(false);\n  const supabase = createClient();\n\n  // Creation State\n  const [createType, setCreateType] = useState<StoryType>('text');\n  const [textContent, setTextContent] = useState(\"\");\n  const [textBg, setTextBg] = useState<'black' | 'white' | 'gradient'>('gradient');\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const fetchStories = async () => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    const { data: storiesData, error } = await supabase\n      .from('stories')\n      .select(`\n        *,\n        profiles (full_name, username, avatar_url)\n      `)\n      .gt('expires_at', new Date().toISOString())\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error(\"Error fetching stories:\", error);\n      return;\n    }\n\n    const groupedStories: { [key: string]: UserWithStories } = {};\n\n    // Current User Placeholder\n    groupedStories[user.id] = {\n      userId: user.id,\n      userName: \"You\",\n      userAvatar: user.user_metadata.avatar_url || \"\",\n      stories: [],\n      isCurrentUser: true\n    };\n\n    storiesData?.forEach((story: any) => {\n      const userId = story.user_id;\n      if (!groupedStories[userId]) {\n        groupedStories[userId] = {\n          userId: userId,\n          userName: story.profiles?.full_name || \"User\",\n          userAvatar: story.profiles?.avatar_url || \"\",\n          stories: [],\n          isCurrentUser: userId === user.id\n        };\n      }\n\n      groupedStories[userId].stories.push({\n        id: story.id,\n        userId: userId,\n        userName: story.profiles?.full_name || \"User\",\n        userAvatar: story.profiles?.avatar_url || \"\",\n        content: story.content || story.media_url,\n        type: story.type,\n        bgColor: story.background_color,\n        timestamp: new Date(story.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n      });\n    });\n\n    const storiesArray = Object.values(groupedStories).sort((a, b) => {\n      if (a.isCurrentUser) return -1;\n      if (b.isCurrentUser) return 1;\n      return 0;\n    });\n\n    setStories(storiesArray);\n  };\n\n  useEffect(() => {\n    fetchStories();\n\n    // Subscribe to realtime stories\n    const channel = supabase\n      .channel('realtime_stories')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'stories' }, () => {\n        fetchStories();\n      })\n      .subscribe();\n\n    return () => { supabase.removeChannel(channel); };\n  }, []);\n\n  const handleUserClick = (index: number) => {\n    if (stories[index].isCurrentUser && stories[index].stories.length === 0) {\n      setIsCreating(true);\n    } else {\n      setSelectedUserIndex(index);\n      setCurrentStoryIndex(0);\n    }\n  };\n\n  const handleNextStory = () => {\n    if (selectedUserIndex === null) return;\n    const currentUserStories = stories[selectedUserIndex].stories;\n    if (currentStoryIndex < currentUserStories.length - 1) {\n      setCurrentStoryIndex(prev => prev + 1);\n    } else {\n      // Next User\n      if (selectedUserIndex < stories.length - 1) {\n        let nextIndex = selectedUserIndex + 1;\n        while (nextIndex < stories.length && stories[nextIndex].stories.length === 0) {\n          nextIndex++;\n        }\n        if (nextIndex < stories.length) {\n          setSelectedUserIndex(nextIndex);\n          setCurrentStoryIndex(0);\n        } else {\n          closeViewer();\n        }\n      } else {\n        closeViewer();\n      }\n    }\n  };\n\n  const handlePrevStory = () => {\n    if (selectedUserIndex === null) return;\n    if (currentStoryIndex > 0) {\n      setCurrentStoryIndex(prev => prev - 1);\n    } else {\n      // Prev User\n      if (selectedUserIndex > 0) {\n        let prevIndex = selectedUserIndex - 1;\n        while (prevIndex >= 0 && stories[prevIndex].stories.length === 0) {\n          prevIndex--;\n        }\n        if (prevIndex >= 0) {\n          setSelectedUserIndex(prevIndex);\n          setCurrentStoryIndex(stories[prevIndex].stories.length - 1);\n        } else {\n          closeViewer();\n        }\n      } else {\n        closeViewer();\n      }\n    }\n  };\n\n  const closeViewer = () => {\n    setSelectedUserIndex(null);\n    setCurrentStoryIndex(0);\n  };\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handlePostStory = async () => {\n    setIsUploading(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error(\"Not authenticated\");\n\n      let mediaUrl = null;\n\n      if (createType === 'image' && imageFile) {\n        const fileExt = imageFile.name.split('.').pop();\n        const fileName = `${user.id}/${Math.random()}.${fileExt}`;\n        const { error: uploadError } = await supabase.storage\n          .from('story-media')\n          .upload(fileName, imageFile);\n\n        if (uploadError) throw uploadError;\n\n        const { data: { publicUrl } } = supabase.storage\n          .from('story-media')\n          .getPublicUrl(fileName);\n\n        mediaUrl = publicUrl;\n      }\n\n      const { error } = await supabase\n        .from('stories')\n        .insert({\n          user_id: user.id,\n          type: createType,\n          content: createType === 'text' ? textContent : null,\n          media_url: mediaUrl,\n          background_color: createType === 'text' ? textBg : null,\n          expires_at: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()\n        });\n\n      if (error) throw error;\n\n      await fetchStories();\n      setIsCreating(false);\n      resetCreation();\n    } catch (error) {\n      console.error(\"Error posting story:\", error);\n      alert(\"Failed to post story\");\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const resetCreation = () => {\n    setTextContent(\"\");\n    setTextBg(\"gradient\");\n    setImageFile(null);\n    setImagePreview(null);\n    setCreateType(\"text\");\n  };\n\n  const currentUser = stories[selectedUserIndex || 0];\n  const currentStory = currentUser?.stories[currentStoryIndex];\n\n  if (stories.length === 0) return null;\n\n  return (\n    <div className=\"w-full py-6 overflow-x-auto no-scrollbar\">\n      <div className=\"flex gap-5 px-4 min-w-max\">\n        {/* Create Story Button */}\n        <motion.div\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          className=\"flex flex-col items-center gap-2 cursor-pointer group\"\n          onClick={() => handleUserClick(0)}\n        >\n          <div className=\"relative w-[72px] h-[72px] rounded-full p-[3px] bg-gradient-to-tr from-purple-500 via-pink-500 to-orange-500\">\n            {/* If user has no stories, show dashed border instead of gradient maybe? No, Instagram keeps gradient if you want to add more. Let's keep it distinctive. */}\n            {stories[0].stories.length === 0 && (\n              <div className=\"absolute inset-0 bg-background rounded-full m-[2px]\" />\n            )}\n\n            <div className=\"w-full h-full rounded-full overflow-hidden border-[3px] border-background relative z-10\">\n              {stories[0].userAvatar ? (\n                <img\n                  src={stories[0].userAvatar}\n                  alt=\"You\"\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full bg-neutral-800 flex items-center justify-center text-xs font-bold\">You</div>\n              )}\n\n              {stories[0].stories.length === 0 && (\n                <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center\">\n                  <Plus className=\"w-6 h-6 text-white drop-shadow-md\" />\n                </div>\n              )}\n            </div>\n\n            {stories[0].stories.length > 0 && (\n              <div className=\"absolute bottom-0 right-0 z-20 bg-blue-500 text-white p-0.5 rounded-full border-2 border-background\">\n                <Plus className=\"w-3 h-3\" />\n              </div>\n            )}\n          </div>\n          <span className=\"text-xs text-white/90 font-medium\">Your Flow</span>\n        </motion.div>\n\n        {/* Story Circles */}\n        {stories.slice(1).map((user, index) => (\n          <motion.div\n            key={user.userId}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            className=\"flex flex-col items-center gap-2 cursor-pointer\"\n            onClick={() => handleUserClick(index + 1)}\n          >\n            <div className=\"relative w-[72px] h-[72px] rounded-full p-[3px] bg-gradient-to-tr from-cyan-400 via-blue-500 to-purple-600\">\n              <div className=\"w-full h-full rounded-full overflow-hidden border-[3px] border-background\">\n                {user.userAvatar ? (\n                  <img\n                    src={user.userAvatar}\n                    alt={user.userName}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-full h-full bg-neutral-800 flex items-center justify-center text-xs font-bold\">{user.userName[0]}</div>\n                )}\n              </div>\n            </div>\n            <span className=\"text-xs text-muted-foreground font-medium max-w-[70px] truncate\">{user.userName}</span>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Modern Creation Modal */}\n      <AnimatePresence>\n        {isCreating && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            className=\"fixed inset-0 z-[60] bg-black/95 backdrop-blur-md flex items-center justify-center p-4 sm:p-8\"\n          >\n            <div className=\"w-full max-w-2xl bg-neutral-900 rounded-3xl overflow-hidden border border-white/10 shadow-2xl relative flex flex-col h-[85vh]\">\n\n              {/* Top Bar */}\n              <div className=\"absolute top-0 left-0 right-0 p-6 flex justify-between items-center z-20\">\n                <h2 className=\"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60\">\n                  {createType === 'text' ? 'Create Note' : 'Upload Media'}\n                </h2>\n                <button onClick={() => { setIsCreating(false); resetCreation(); }} className=\"p-2 hover:bg-white/10 rounded-full transition-colors\">\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              {/* Main Canvas */}\n              <div className=\"flex-1 relative flex items-center justify-center bg-neutral-950/50\">\n                {createType === 'text' ? (\n                  <motion.div\n                    initial={{ opacity: 0 }} animate={{ opacity: 1 }}\n                    className={`w-full h-full flex items-center justify-center p-12 transition-colors duration-500 \n                                ${textBg === 'white' ? 'bg-white text-black' :\n                        textBg === 'gradient' ? 'bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white' :\n                          'bg-neutral-900 text-white'}`}\n                  >\n                    <textarea\n                      value={textContent}\n                      onChange={(e) => setTextContent(e.target.value)}\n                      placeholder=\"Type something...\"\n                      className=\"w-full h-full bg-transparent border-none resize-none focus:ring-0 text-3xl md:text-5xl font-bold text-center placeholder:text-current/50 outline-none\"\n                      autoFocus\n                    />\n                  </motion.div>\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center bg-neutral-900 relative\">\n                    {imagePreview ? (\n                      <div className=\"relative w-full h-full\">\n                        <img src={imagePreview} alt=\"Preview\" className=\"w-full h-full object-contain\" />\n                        <button\n                          onClick={() => { setImagePreview(null); setImageFile(null); }}\n                          className=\"absolute top-4 right-4 bg-black/60 p-2 rounded-full hover:bg-black/80 text-white\"\n                        >\n                          <X className=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                    ) : (\n                      <motion.label\n                        whileHover={{ scale: 1.02 }}\n                        whileTap={{ scale: 0.98 }}\n                        className=\"flex flex-col items-center justify-center gap-4 cursor-pointer p-12 rounded-3xl border-2 border-dashed border-white/10 hover:border-white/30 hover:bg-white/5 transition-all w-3/4 aspect-square max-h-[400px]\"\n                      >\n                        <div className=\"w-20 h-20 rounded-full bg-white/5 flex items-center justify-center\">\n                          <UploadCloud className=\"w-10 h-10 text-primary\" />\n                        </div>\n                        <div className=\"text-center\">\n                          <h3 className=\"text-lg font-bold\">Upload Photo</h3>\n                          <p className=\"text-sm text-muted-foreground mt-1\">PNG, JPG up to 10MB</p>\n                        </div>\n                        <input\n                          type=\"file\"\n                          ref={fileInputRef}\n                          accept=\"image/*\"\n                          className=\"hidden\"\n                          onChange={handleImageUpload}\n                        />\n                      </motion.label>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Bottom Controls */}\n              <div className=\"p-6 bg-neutral-900 border-t border-white/5 flex flex-col gap-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex gap-2 p-1 bg-black/40 rounded-xl\">\n                    <button\n                      onClick={() => setCreateType('text')}\n                      className={`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${createType === 'text' ? 'bg-white text-black shadow-lg' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                      Text\n                    </button>\n                    <button\n                      onClick={() => setCreateType('image')}\n                      className={`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${createType === 'image' ? 'bg-white text-black shadow-lg' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                      Image\n                    </button>\n                  </div>\n\n                  {createType === 'text' && (\n                    <div className=\"flex gap-3\">\n                      {['gradient', 'black', 'white'].map((bg) => (\n                        <button\n                          key={bg}\n                          onClick={() => setTextBg(bg as any)}\n                          className={`w-8 h-8 rounded-full border-2 transition-all ${textBg === bg ? 'border-primary ring-2 ring-primary/30' : 'border-white/20'}`}\n                          style={{\n                            background: bg === 'gradient' ? 'linear-gradient(to bottom right, #6366f1, #a855f7, #ec4899)' : bg\n                          }}\n                        />\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                <button\n                  onClick={handlePostStory}\n                  disabled={(createType === 'text' ? !textContent : !imagePreview) || isUploading}\n                  className=\"w-full py-4 bg-primary text-white rounded-2xl font-bold text-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-primary/25\"\n                >\n                  {isUploading ? \"Sharing to Flow...\" : \"Share Now\"}\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Immersive Story Viewer */}\n      <AnimatePresence>\n        {selectedUserIndex !== null && currentStory && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-[70] bg-black\"\n          >\n            {/* Story Content */}\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              {currentStory.type === 'text' ? (\n                <div\n                  className={`w-full h-full flex items-center justify-center p-8 text-center`}\n                  style={{\n                    background: currentStory.bgColor === 'gradient'\n                      ? 'linear-gradient(to bottom right, #6366f1, #a855f7, #ec4899)'\n                      : currentStory.bgColor === 'white' ? 'white' : 'black',\n                    color: currentStory.bgColor === 'white' ? 'black' : 'white'\n                  }}\n                >\n                  <p className=\"text-3xl md:text-5xl font-bold whitespace-pre-wrap max-w-4xl leading-tight\">\n                    {currentStory.content}\n                  </p>\n                </div>\n              ) : (\n                <img src={currentStory.content} className=\"w-full h-full object-contain\" alt=\"Story\" />\n              )}\n            </div>\n\n            {/* Overlays */}\n            <div className=\"absolute inset-x-0 top-0 pt-4 px-4 bg-gradient-to-b from-black/60 to-transparent pb-24 z-20\">\n              {/* Progress Bar */}\n              <div className=\"flex gap-1.5 mb-4\">\n                {currentUser.stories.map((story, idx) => (\n                  <div key={story.id} className=\"h-0.5 flex-1 bg-white/20 rounded-full overflow-hidden\">\n                    <motion.div\n                      initial={{ width: 0 }}\n                      animate={{ width: idx < currentStoryIndex ? \"100%\" : idx === currentStoryIndex ? \"100%\" : \"0%\" }}\n                      transition={{ duration: idx === currentStoryIndex ? 5 : 0, ease: \"linear\" }}\n                      onAnimationComplete={() => {\n                        if (idx === currentStoryIndex) handleNextStory();\n                      }}\n                      className=\"h-full bg-white shadow-[0_0_10px_white]\"\n                    />\n                  </div>\n                ))}\n              </div>\n\n              {/* Header */}\n              <div className=\"flex justify-between items-center\">\n                <div className=\"flex items-center gap-3\">\n                  {currentUser.userAvatar ? (\n                    <img src={currentUser.userAvatar} className=\"w-10 h-10 rounded-full border border-white/20\" />\n                  ) : (\n                    <div className=\"w-10 h-10 rounded-full bg-neutral-800 flex items-center justify-center font-bold\">{currentUser.userName[0]}</div>\n                  )}\n                  <div>\n                    <p className=\"font-bold text-white text-sm\">{currentUser.userName}</p>\n                    <p className=\"text-xs text-white/60\">{currentStory.timestamp}</p>\n                  </div>\n                </div>\n                <button onClick={closeViewer} className=\"p-2 hover:bg-white/10 rounded-full\">\n                  <X className=\"w-6 h-6 text-white\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Navigation Zones */}\n            <div className=\"absolute inset-0 z-10 grid grid-cols-[1fr_2fr_1fr]\">\n              <div onClick={handlePrevStory} className=\"h-full\" />\n              <div onClick={handleNextStory} className=\"h-full\" />\n              <div onClick={handleNextStory} className=\"h-full\" />\n            </div>\n\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":["createClient","AnimatePresence","motion","Plus","UploadCloud","X","useEffect","useRef","useState","StoryType","Story","id","userId","userName","userAvatar","content","type","bgColor","timestamp","UserWithStories","stories","isCurrentUser","StoriesSection","setStories","selectedUserIndex","setSelectedUserIndex","currentStoryIndex","setCurrentStoryIndex","isCreating","setIsCreating","supabase","createType","setCreateType","textContent","setTextContent","textBg","setTextBg","imageFile","setImageFile","File","imagePreview","setImagePreview","isUploading","setIsUploading","fileInputRef","HTMLInputElement","fetchStories","data","user","auth","getUser","storiesData","error","from","select","gt","Date","toISOString","order","ascending","console","groupedStories","key","user_metadata","avatar_url","forEach","story","user_id","profiles","full_name","push","media_url","background_color","created_at","toLocaleTimeString","hour","minute","storiesArray","Object","values","sort","a","b","channel","on","event","schema","table","subscribe","removeChannel","handleUserClick","index","length","handleNextStory","currentUserStories","prev","nextIndex","closeViewer","handlePrevStory","prevIndex","handleImageUpload","e","React","ChangeEvent","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handlePostStory","Error","mediaUrl","fileExt","name","split","pop","fileName","Math","random","uploadError","storage","upload","publicUrl","getPublicUrl","insert","expires_at","now","resetCreation","alert","currentUser","currentStory","scale","slice","map","opacity","value","bg","background","color","idx","width","duration","ease"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2167, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/app/%28main%29/feed/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { CreatePost } from \"@/components/feed/CreatePost\";\nimport { FeedPost } from \"@/components/feed/FeedPost\";\nimport { StoriesSection } from \"@/components/feed/StoriesSection\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Loader2, Sparkles } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\n\ninterface PostWithData {\n    id: string;\n    content: string;\n    image_url: string | null;\n    created_at: string;\n    profiles: {\n        full_name: string;\n        username: string;\n        avatar_url: string;\n    };\n    tasks: {\n        id: string;\n        text: string;\n        is_completed: boolean;\n    }[];\n    likes: { count: number }[]; // Aggregate\n    comments: { count: number }[]; // Aggregate\n}\n\nexport default function FeedPage() {\n    const [posts, setPosts] = useState<PostWithData[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [currentUserId, setCurrentUserId] = useState<string | undefined>(undefined);\n    const [activeTab, setActiveTab] = useState<'foryou' | 'following'>('foryou');\n    const supabase = createClient();\n\n    const fetchPosts = async () => {\n        setLoading(true);\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (user) setCurrentUserId(user.id);\n\n            let query = supabase\n                .from('posts')\n                .select(`\n                    *,\n                    profiles (full_name, username, avatar_url),\n                    tasks (id, text, is_completed),\n                    likes (count),\n                    comments (count)\n                `)\n                .order('created_at', { ascending: false });\n\n            if (activeTab === 'following' && user) {\n                // Fetch followings first\n                const { data: follows } = await supabase\n                    .from('follows')\n                    .select('following_id')\n                    .eq('follower_id', user.id);\n\n                const followingIds = follows?.map(f => f.following_id) || [];\n\n                if (followingIds.length > 0) {\n                    query = query.in('user_id', followingIds);\n                } else {\n                    // Following no one, return empty\n                    setPosts([]);\n                    setLoading(false);\n                    return;\n                }\n            }\n\n            const { data, error } = await query;\n\n            if (error) throw error;\n            // @ts-ignore\n            setPosts(data || []);\n        } catch (error) {\n            console.error(\"Error fetching posts:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchPosts();\n\n        const channel = supabase\n            .channel('realtime posts')\n            .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'posts' }, (payload) => {\n                fetchPosts();\n            })\n            .subscribe();\n\n        return () => {\n            supabase.removeChannel(channel);\n        };\n    }, [activeTab]); // Refetch when tab changes\n\n    return (\n        <div className=\"w-full pb-20\">\n            <div className=\"sticky top-0 z-20 bg-black/60 backdrop-blur-xl border-b border-white/5 px-4 py-3 flex items-center justify-between\">\n                <div className=\"flex gap-6\">\n                    <button\n                        onClick={() => setActiveTab('foryou')}\n                        className={`font-bold text-lg pb-1 transition-colors ${activeTab === 'foryou' ? 'text-white border-b-2 border-primary' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                        For You\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('following')}\n                        className={`font-bold text-lg pb-1 transition-colors ${activeTab === 'following' ? 'text-white border-b-2 border-primary' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                        Following\n                    </button>\n                </div>\n            </div>\n\n            <StoriesSection />\n\n            <CreatePost onPostCreated={fetchPosts} />\n\n            <div className=\"mt-6 space-y-6\">\n                {loading ? (\n                    <div className=\"flex justify-center py-12\">\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                    </div>\n                ) : posts.length > 0 ? (\n                    posts.map((post) => (\n                        <FeedPost\n                            key={post.id}\n                            id={post.id}\n                            userId={\n                                // @ts-ignore\n                                post.user_id\n                            }\n                            currentUserId={currentUserId}\n                            user={{\n                                name: post.profiles?.full_name || 'Unknown User',\n                                handle: post.profiles?.username || 'user',\n                                avatar: post.profiles?.avatar_url || ''\n                            }}\n                            timestamp={new Date(post.created_at).toLocaleDateString()}\n                            content={post.content}\n                            tasks={post.tasks?.map(t => ({ id: t.id, text: t.text, completed: t.is_completed })) || []}\n                            image={post.image_url || undefined}\n                            stats={{\n                                // @ts-ignore\n                                likes: post.likes?.[0]?.count || 0,\n                                // @ts-ignore \n                                comments: post.comments?.[0]?.count || 0\n                            }}\n                        />\n                    ))\n                ) : (\n                    <div className=\"text-center py-20 px-4\">\n                        <div className=\"h-16 w-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            <Sparkles className=\"h-8 w-8 text-muted-foreground\" />\n                        </div>\n                        <h3 className=\"text-xl font-bold text-white mb-2\">\n                            {activeTab === 'following' ? \"No following posts\" : \"No flows yet\"}\n                        </h3>\n                        <p className=\"text-muted-foreground max-w-sm mx-auto\">\n                            {activeTab === 'following'\n                                ? \"Follow some creators to see their flows here.\"\n                                : \"Be the first to share your daily flow! Use the input above to create a post.\"}\n                        </p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":["CreatePost","FeedPost","StoriesSection","createClient","Loader2","Sparkles","useEffect","useState","PostWithData","id","content","image_url","created_at","profiles","full_name","username","avatar_url","tasks","text","is_completed","likes","count","comments","FeedPage","posts","setPosts","loading","setLoading","currentUserId","setCurrentUserId","undefined","activeTab","setActiveTab","supabase","fetchPosts","data","user","auth","getUser","query","from","select","order","ascending","follows","eq","followingIds","map","f","following_id","length","in","error","console","channel","on","event","schema","table","payload","subscribe","removeChannel","post","user_id","name","handle","avatar","Date","toLocaleDateString","t","completed"],"mappings":"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","ignoreList":[]}}]
}