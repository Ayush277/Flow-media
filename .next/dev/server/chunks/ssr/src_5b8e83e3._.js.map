{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/ui/GlowCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { motion, useMotionTemplate, useMotionValue } from \"framer-motion\";\nimport { MouseEvent } from \"react\";\n\nexport function GlowCard({ children, className }: { children: React.ReactNode; className?: string }) {\n    const mouseX = useMotionValue(0);\n    const mouseY = useMotionValue(0);\n\n    function handleMouseMove({ currentTarget, clientX, clientY }: MouseEvent) {\n        const { left, top } = currentTarget.getBoundingClientRect();\n        mouseX.set(clientX - left);\n        mouseY.set(clientY - top);\n    }\n\n    return (\n        <div\n            className={cn(\n                \"group relative border border-white/10 bg-gray-900/40 overflow-hidden\",\n                className\n            )}\n            onMouseMove={handleMouseMove}\n        >\n            <motion.div\n                className=\"pointer-events-none absolute -inset-px opacity-0 transition duration-300 group-hover:opacity-100\"\n                style={{\n                    background: useMotionTemplate`\n            radial-gradient(\n              650px circle at ${mouseX}px ${mouseY}px,\n              rgba(124, 58, 237, 0.15),\n              transparent 80%\n            )\n          `,\n                }}\n            />\n            <div className=\"relative h-full\">{children}</div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAMO,SAAS,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAqD;IAC/F,MAAM,SAAS,IAAA,oMAAc,EAAC;IAC9B,MAAM,SAAS,IAAA,oMAAc,EAAC;IAE9B,SAAS,gBAAgB,EAAE,aAAa,EAAE,OAAO,EAAE,OAAO,EAAc;QACpE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,cAAc,qBAAqB;QACzD,OAAO,GAAG,CAAC,UAAU;QACrB,OAAO,GAAG,CAAC,UAAU;IACzB;IAEA,qBACI,8OAAC;QACG,WAAW,IAAA,yHAAE,EACT,wEACA;QAEJ,aAAa;;0BAEb,8OAAC,oMAAM,CAAC,GAAG;gBACP,WAAU;gBACV,OAAO;oBACH,YAAY,0MAAiB,CAAC;;8BAEpB,EAAE,OAAO,GAAG,EAAE,OAAO;;;;UAIzC,CAAC;gBACK;;;;;;0BAEJ,8OAAC;gBAAI,WAAU;0BAAmB;;;;;;;;;;;;AAG9C"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/CreatePost.tsx"],"sourcesContent":["\"use client\";\n\nimport { GlowCard } from \"@/components/ui/GlowCard\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { cn } from \"@/lib/utils\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Image as ImageIcon, Loader2, Send, X } from \"lucide-react\";\nimport { useRef, useState } from \"react\";\n\nexport function CreatePost({ onPostCreated }: { onPostCreated?: () => void }) {\n    const [content, setContent] = useState(\"\");\n    const [selectedImage, setSelectedImage] = useState<File | null>(null);\n    const [imagePreview, setImagePreview] = useState<string | null>(null);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const supabase = createClient();\n\n    const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setSelectedImage(file);\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setImagePreview(reader.result as string);\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const removeImage = () => {\n        setSelectedImage(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n    };\n\n    const handleSubmit = async () => {\n        if (!content.trim() && !selectedImage) return;\n\n        setIsSubmitting(true);\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) throw new Error(\"Not authenticated\");\n\n            let imageUrl = null;\n\n            // Upload Image if exists\n            if (selectedImage) {\n                const fileExt = selectedImage.name.split('.').pop();\n                const fileName = `${user.id}/${Math.random()}.${fileExt}`;\n                const { error: uploadError } = await supabase.storage\n                    .from('post-images')\n                    .upload(fileName, selectedImage);\n\n                if (uploadError) throw uploadError;\n\n                const { data: { publicUrl } } = supabase.storage\n                    .from('post-images')\n                    .getPublicUrl(fileName);\n\n                imageUrl = publicUrl;\n            }\n\n            // Insert Post\n            const { data: post, error: postError } = await supabase\n                .from('posts')\n                .insert({\n                    user_id: user.id,\n                    content,\n                    image_url: imageUrl\n                })\n                .select()\n                .single();\n\n            if (postError) throw postError;\n\n            // Reset Form\n            setContent(\"\");\n            removeImage();\n            if (onPostCreated) onPostCreated();\n\n        } catch (error) {\n            console.error(\"Error creating post:\", error);\n            alert(\"Failed to post. Please try again.\");\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <div className=\"mb-8 px-4 md:px-0\">\n            <GlowCard className=\"rounded-3xl p-1 backdrop-blur-xl border-white/5\">\n                <div className=\"bg-black/40 rounded-[22px] p-4\">\n                    <div className=\"flex gap-4\">\n                        <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 shrink-0\" />\n                        <div className=\"flex-1\">\n                            <textarea\n                                value={content}\n                                onChange={(e) => setContent(e.target.value)}\n                                placeholder=\"Share your flow...\"\n                                className=\"w-full bg-transparent border-none focus:ring-0 text-lg placeholder:text-muted-foreground/50 resize-none min-h-[60px]\"\n                            />\n\n                            <AnimatePresence>\n                                {imagePreview && (\n                                    <motion.div\n                                        initial={{ opacity: 0, height: 0 }}\n                                        animate={{ opacity: 1, height: \"auto\" }}\n                                        exit={{ opacity: 0, height: 0 }}\n                                        className=\"relative rounded-xl overflow-hidden mb-4 group\"\n                                    >\n                                        <img src={imagePreview} alt=\"Preview\" className=\"w-full max-h-[300px] object-cover rounded-xl\" />\n                                        <button\n                                            onClick={removeImage}\n                                            className=\"absolute top-2 right-2 p-1.5 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors\"\n                                        >\n                                            <X className=\"h-4 w-4\" />\n                                        </button>\n                                    </motion.div>\n                                )}\n                            </AnimatePresence>\n\n                            <div className=\"flex items-center justify-between mt-2 pt-2 border-t border-white/5\">\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        onClick={() => fileInputRef.current?.click()}\n                                        className=\"p-2 text-primary hover:bg-primary/10 rounded-full transition-colors\"\n                                    >\n                                        <ImageIcon className=\"h-5 w-5\" />\n                                    </button>\n                                    <input\n                                        type=\"file\"\n                                        ref={fileInputRef}\n                                        className=\"hidden\"\n                                        accept=\"image/*\"\n                                        onChange={handleImageSelect}\n                                    />\n                                </div>\n                                <button\n                                    onClick={handleSubmit}\n                                    disabled={(!content.trim() && !selectedImage) || isSubmitting}\n                                    className={cn(\n                                        \"px-4 py-2 rounded-full font-bold text-sm flex items-center gap-2 transition-all\",\n                                        (content.trim() || selectedImage) && !isSubmitting\n                                            ? \"bg-primary text-white hover:opacity-90\"\n                                            : \"bg-white/5 text-muted-foreground cursor-not-allowed\"\n                                    )}\n                                >\n                                    {isSubmitting ? (\n                                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                    ) : (\n                                        <>\n                                            Post Flow\n                                            <Send className=\"h-3.5 w-3.5\" />\n                                        </>\n                                    )}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </GlowCard>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/CommentDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { createClient } from \"@/lib/supabase/client\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Loader2, Send, X } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\n\ninterface Comment {\n    id: string;\n    content: string;\n    created_at: string;\n    user_id: string;\n    profiles: {\n        username: string;\n        full_name: string;\n        avatar_url: string;\n    };\n}\n\ninterface CommentDrawerProps {\n    postId: string;\n    isOpen: boolean;\n    onClose: () => void;\n    onCommentAdded?: () => void;\n}\n\nexport function CommentDrawer({ postId, isOpen, onClose, onCommentAdded }: CommentDrawerProps) {\n    const [comments, setComments] = useState<Comment[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [newComment, setNewComment] = useState(\"\");\n    const [submitting, setSubmitting] = useState(false);\n    const supabase = createClient();\n\n    const fetchComments = async () => {\n        try {\n            const { data, error } = await supabase\n                .from('comments')\n                .select(`\n                    id,\n                    content,\n                    created_at,\n                    user_id,\n                    profiles (username, full_name, avatar_url)\n                `)\n                .eq('post_id', postId)\n                .order('created_at', { ascending: true });\n\n            if (error) throw error;\n            // @ts-ignore\n            setComments(data || []);\n        } catch (error) {\n            console.error(\"Error fetching comments:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            setLoading(true);\n            fetchComments();\n\n            // Realtime subscription for new comments on this post\n            const channel = supabase\n                .channel(`comments-${postId}`)\n                .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'comments', filter: `post_id=eq.${postId}` }, (payload) => {\n                    // Fetch again to get profile data relations\n                    fetchComments();\n                })\n                .subscribe();\n\n            return () => {\n                supabase.removeChannel(channel);\n            };\n        }\n    }, [isOpen, postId]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!newComment.trim()) return;\n\n        setSubmitting(true);\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) throw new Error(\"Not authenticated\");\n\n            const { error } = await supabase\n                .from('comments')\n                .insert({\n                    post_id: postId,\n                    user_id: user.id,\n                    content: newComment.trim()\n                });\n\n            if (error) throw error;\n\n            setNewComment(\"\");\n            if (onCommentAdded) onCommentAdded();\n\n            // We rely on realtime or fetch fetchComments() called by realtime listener \n            // But to be instant for the user:\n            await fetchComments();\n\n        } catch (error) {\n            console.error(\"Error posting comment:\", error);\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    return (\n        <AnimatePresence>\n            {isOpen && (\n                <>\n                    {/* Backdrop */}\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        onClick={onClose}\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50\"\n                    />\n\n                    {/* Drawer */}\n                    <motion.div\n                        initial={{ x: \"100%\" }}\n                        animate={{ x: 0 }}\n                        exit={{ x: \"100%\" }}\n                        transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\n                        className=\"fixed inset-y-0 right-0 z-50 w-full max-w-md bg-neutral-900 border-l border-white/10 shadow-2xl flex flex-col\"\n                    >\n                        {/* Header */}\n                        <div className=\"flex items-center justify-between p-4 border-b border-white/5 bg-neutral-900/50 backdrop-blur-md\">\n                            <h3 className=\"font-bold text-lg\">Comments</h3>\n                            <button\n                                onClick={onClose}\n                                className=\"p-2 hover:bg-white/10 rounded-full transition-colors\"\n                            >\n                                <X className=\"h-5 w-5\" />\n                            </button>\n                        </div>\n\n                        {/* Comments List */}\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar\">\n                            {loading ? (\n                                <div className=\"flex justify-center py-8\">\n                                    <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n                                </div>\n                            ) : comments.length > 0 ? (\n                                comments.map((comment) => (\n                                    <div key={comment.id} className=\"flex gap-3 group\">\n                                        <div className=\"shrink-0 h-8 w-8 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 overflow-hidden\">\n                                            {comment.profiles?.avatar_url ? (\n                                                <img src={comment.profiles.avatar_url} alt={comment.profiles.username} className=\"w-full h-full object-cover\" />\n                                            ) : (\n                                                <div className=\"w-full h-full flex items-center justify-center text-xs font-bold text-white\">\n                                                    {comment.profiles?.full_name?.[0] || \"?\"}\n                                                </div>\n                                            )}\n                                        </div>\n                                        <div className=\"flex-1 space-y-1\">\n                                            <div className=\"flex items-baseline gap-2\">\n                                                <span className=\"text-sm font-bold text-white\">{comment.profiles?.full_name}</span>\n                                                <span className=\"text-xs text-muted-foreground\">{new Date(comment.created_at).toLocaleDateString()}</span>\n                                            </div>\n                                            <p className=\"text-sm text-gray-300 leading-relaxed\">{comment.content}</p>\n                                        </div>\n                                    </div>\n                                ))\n                            ) : (\n                                <div className=\"text-center py-12 text-muted-foreground\">\n                                    <p>No comments yet.</p>\n                                    <p className=\"text-sm\">Be the first to start the conversation.</p>\n                                </div>\n                            )}\n                        </div>\n\n                        {/* Input Area */}\n                        <div className=\"p-4 bg-neutral-900 border-t border-white/5\">\n                            <form onSubmit={handleSubmit} className=\"relative flex items-center gap-2\">\n                                <input\n                                    type=\"text\"\n                                    value={newComment}\n                                    onChange={(e) => setNewComment(e.target.value)}\n                                    placeholder=\"Write a comment...\"\n                                    className=\"w-full bg-white/5 border border-white/10 rounded-full pl-4 pr-12 py-3 focus:outline-none focus:border-primary/50 text-sm transition-colors\"\n                                />\n                                <button\n                                    type=\"submit\"\n                                    disabled={!newComment.trim() || submitting}\n                                    className=\"absolute right-2 p-1.5 bg-primary text-white rounded-full disabled:opacity-50 disabled:bg-transparent disabled:text-muted-foreground hover:bg-primary/90 transition-all\"\n                                >\n                                    {submitting ? (\n                                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                    ) : (\n                                        <Send className=\"h-4 w-4 ml-0.5\" />\n                                    )}\n                                </button>\n                            </form>\n                        </div>\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/hooks/useFollow.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/client';\nimport { useCallback, useEffect, useState } from 'react';\n\nexport function useFollow(targetUserId: string, currentUserId?: string) {\n    const [isFollowing, setIsFollowing] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const supabase = createClient();\n\n    // Check status\n    useEffect(() => {\n        if (!currentUserId || !targetUserId || currentUserId === targetUserId) return;\n\n        const checkFollow = async () => {\n            const { data } = await supabase\n                .from('follows')\n                .select('*')\n                .eq('follower_id', currentUserId)\n                .eq('following_id', targetUserId)\n                .single();\n\n            if (data) setIsFollowing(true);\n        };\n\n        checkFollow();\n    }, [currentUserId, targetUserId]);\n\n    const toggleFollow = useCallback(async () => {\n        if (!currentUserId || !targetUserId || isLoading) return;\n\n        setIsLoading(true);\n        // Optimistic\n        const previousState = isFollowing;\n        setIsFollowing(!previousState);\n\n        try {\n            if (previousState) {\n                // Unfollow\n                const { error } = await supabase\n                    .from('follows')\n                    .delete()\n                    .eq('follower_id', currentUserId)\n                    .eq('following_id', targetUserId);\n                if (error) throw error;\n            } else {\n                // Follow\n                const { error } = await supabase\n                    .from('follows')\n                    .insert({\n                        follower_id: currentUserId,\n                        following_id: targetUserId\n                    });\n                if (error) throw error;\n            }\n        } catch (error) {\n            console.error(\"Error toggling follow:\", error);\n            setIsFollowing(previousState); // Revert\n        } finally {\n            setIsLoading(false);\n        }\n    }, [currentUserId, targetUserId, isFollowing, isLoading]);\n\n    return { isFollowing, toggleFollow, isLoading };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,UAAU,YAAoB,EAAE,aAAsB;IAClE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,WAAW,IAAA,gJAAY;IAE7B,eAAe;IACf,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,kBAAkB,cAAc;QAEvE,MAAM,cAAc;YAChB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAClB,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,eAAe,eAClB,EAAE,CAAC,gBAAgB,cACnB,MAAM;YAEX,IAAI,MAAM,eAAe;QAC7B;QAEA;IACJ,GAAG;QAAC;QAAe;KAAa;IAEhC,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC7B,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,WAAW;QAElD,aAAa;QACb,aAAa;QACb,MAAM,gBAAgB;QACtB,eAAe,CAAC;QAEhB,IAAI;YACA,IAAI,eAAe;gBACf,WAAW;gBACX,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACnB,IAAI,CAAC,WACL,MAAM,GACN,EAAE,CAAC,eAAe,eAClB,EAAE,CAAC,gBAAgB;gBACxB,IAAI,OAAO,MAAM;YACrB,OAAO;gBACH,SAAS;gBACT,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACnB,IAAI,CAAC,WACL,MAAM,CAAC;oBACJ,aAAa;oBACb,cAAc;gBAClB;gBACJ,IAAI,OAAO,MAAM;YACrB;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,eAAe,gBAAgB,SAAS;QAC5C,SAAU;YACN,aAAa;QACjB;IACJ,GAAG;QAAC;QAAe;QAAc;QAAa;KAAU;IAExD,OAAO;QAAE;QAAa;QAAc;IAAU;AAClD"}},
    {"offset": {"line": 736, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/FeedPost.tsx"],"sourcesContent":["import { CommentDrawer } from \"@/components/feed/CommentDrawer\";\nimport { useFollow } from \"@/hooks/useFollow\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { cn } from \"@/lib/utils\";\nimport { motion } from \"framer-motion\";\nimport { CheckCircle2, Heart, MessageCircle, MoreHorizontal, Share2, Zap } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\n\ninterface Task {\n    id: string;\n    text: string;\n    completed: boolean;\n}\n\ninterface PostProps {\n    id: string; // Post ID\n    userId: string; // Author ID\n    currentUserId?: string; // To check if liked\n    user: {\n        name: string;\n        handle: string;\n        avatar: string;\n    };\n    timestamp: string;\n    content: string;\n    tasks: Task[];\n    image?: string;\n    stats: {\n        likes: number;\n        comments: number;\n    };\n}\n\nexport function FeedPost({ id, userId, currentUserId, user, timestamp, content, tasks, image, stats }: PostProps) {\n    const supabase = createClient();\n    const [isLiked, setIsLiked] = useState(false);\n    const [likeCount, setLikeCount] = useState(stats.likes);\n    const [loadingLike, setLoadingLike] = useState(false);\n    const [isCommentsOpen, setIsCommentsOpen] = useState(false);\n\n    const { isFollowing, toggleFollow, isLoading: isFollowLoading } = useFollow(userId, currentUserId);\n    const isOwner = currentUserId === userId;\n\n    // Check if user already liked this post\n    useEffect(() => {\n        if (!currentUserId) return;\n\n        const checkLike = async () => {\n            const { data, error } = await supabase\n                .from('likes')\n                .select('*')\n                .eq('post_id', id)\n                .eq('user_id', currentUserId)\n                .single();\n\n            if (data) setIsLiked(true);\n        };\n\n        checkLike();\n    }, [currentUserId, id]);\n\n    const handleLike = async () => {\n        if (!currentUserId || loadingLike) return;\n\n        // Optimistic UI\n        const previousLiked = isLiked;\n        const previousCount = likeCount;\n\n        setIsLiked(!isLiked);\n        setLikeCount(prev => isLiked ? prev - 1 : prev + 1);\n        setLoadingLike(true);\n\n        try {\n            if (previousLiked) {\n                // Remove like\n                const { error } = await supabase\n                    .from('likes')\n                    .delete()\n                    .eq('post_id', id)\n                    .eq('user_id', currentUserId);\n                if (error) throw error;\n            } else {\n                // Add like\n                const { error } = await supabase\n                    .from('likes')\n                    .insert({ post_id: id, user_id: currentUserId });\n                if (error) throw error;\n            }\n        } catch (error) {\n            console.error(\"Error toggling like:\", error);\n            // Revert\n            setIsLiked(previousLiked);\n            setLikeCount(previousCount);\n        } finally {\n            setLoadingLike(false);\n        }\n    };\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            whileHover={{ scale: 1.005 }}\n            transition={{ duration: 0.2 }}\n            className=\"mb-6 px-4 md:px-0\"\n        >\n            <div className=\"relative group rounded-3xl bg-black/40 backdrop-blur-xl border border-white/5 overflow-hidden transition-all duration-300 hover:border-primary/30 hover:shadow-[0_0_30px_-10px_rgba(124,58,237,0.3)]\">\n                {/* Glowing Gradient Background on Hover */}\n                <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-purple-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none\" />\n\n                <div className=\"relative p-6\">\n                    <div className=\"flex gap-5\">\n                        {/* Avatar Column */}\n                        <div className=\"shrink-0\">\n                            <div className=\"h-14 w-14 rounded-2xl bg-gradient-to-br from-gray-800 to-black border border-white/10 flex items-center justify-center text-white font-bold shadow-lg relative overflow-hidden group/avatar cursor-pointer\">\n                                {user.avatar ? (\n                                    <img src={user.avatar} alt={user.name} className=\"w-full h-full object-cover\" />\n                                ) : (\n                                    <>\n                                        <div className=\"absolute inset-0 bg-primary/20 opacity-0 group-hover/avatar:opacity-100 transition-opacity\" />\n                                        <span className=\"relative z-10 text-lg\">{user.name[0]}</span>\n                                    </>\n                                )}\n                            </div>\n                        </div>\n\n                        {/* Content Column */}\n                        <div className=\"flex-1 min-w-0\">\n                            {/* Header */}\n                            <div className=\"flex justify-between items-start mb-3\">\n                                <div className=\"flex-1\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <h3 className=\"font-bold text-white text-lg leading-tight mb-0.5 hover:text-primary transition-colors cursor-pointer\">{user.name}</h3>\n                                        {!isOwner && (\n                                            <button\n                                                onClick={toggleFollow}\n                                                disabled={isFollowLoading}\n                                                className={cn(\n                                                    \"text-xs font-bold px-2 py-0.5 rounded-full transition-all border\",\n                                                    isFollowing\n                                                        ? \"border-white/20 text-muted-foreground hover:bg-red-500/10 hover:text-red-400 hover:border-red-500/20\"\n                                                        : \"bg-primary/10 text-primary border-primary/20 hover:bg-primary/20\"\n                                                )}\n                                            >\n                                                {isFollowing ? \"Following\" : \"Follow\"}\n                                            </button>\n                                        )}\n                                    </div>\n                                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                                        <span className=\"hover:text-white transition-colors cursor-pointer\">@{user.handle}</span>\n                                        <span className=\"w-1 h-1 rounded-full bg-white/20\" />\n                                        <span>{timestamp}</span>\n                                    </div>\n                                </div>\n                                <button className=\"text-muted-foreground hover:text-white p-2 rounded-full hover:bg-white/10 transition-colors\">\n                                    <MoreHorizontal className=\"h-5 w-5\" />\n                                </button>\n                            </div>\n\n                            {/* Text Content */}\n                            <p className=\"text-gray-200 mb-5 whitespace-pre-wrap text-[16px] leading-relaxed font-normal tracking-wide\">\n                                {content}\n                            </p>\n\n                            {/* Tasks Module - Modern Card */}\n                            {tasks.length > 0 && (\n                                <div className=\"bg-white/5 rounded-2xl border border-white/5 overflow-hidden mb-5\">\n                                    <div className=\"px-4 py-2 bg-white/5 border-b border-white/5 flex items-center gap-2\">\n                                        <Zap className=\"h-3.5 w-3.5 text-primary\" />\n                                        <span className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground\">Flow Session</span>\n                                    </div>\n                                    {tasks.map((task, i) => (\n                                        <div\n                                            key={task.id}\n                                            className={cn(\n                                                \"flex items-center gap-3 p-3.5 transition-all duration-300 group/task cursor-default\",\n                                                i !== tasks.length - 1 && \"border-b border-white/5\",\n                                                task.completed ? \"bg-primary/5\" : \"hover:bg-white/5\"\n                                            )}\n                                        >\n                                            {task.completed ? (\n                                                <div className=\"h-5 w-5 rounded-full bg-primary/20 flex items-center justify-center shrink-0\">\n                                                    <CheckCircle2 className=\"h-3.5 w-3.5 text-primary\" />\n                                                </div>\n                                            ) : (\n                                                <div className=\"h-5 w-5 rounded-full border-2 border-white/20 group-hover/task:border-white/40 transition-colors shrink-0\" />\n                                            )}\n                                            <span className={cn(\"text-sm font-medium transition-colors\", task.completed ? \"text-muted-foreground line-through decoration-primary/50\" : \"text-gray-200 group-hover/task:text-white\")}>\n                                                {task.text}\n                                            </span>\n                                        </div>\n                                    ))}\n                                </div>\n                            )}\n\n                            {/* Image Proof - Cinematic */}\n                            {image && (\n                                <div className=\"relative rounded-2xl overflow-hidden mb-5 border border-white/10 shadow-2xl shadow-black/50 group/image cursor-pointer\">\n                                    <div className=\"absolute inset-0 bg-black/20 group-hover/image:bg-transparent transition-colors duration-500 z-10\" />\n                                    <img\n                                        src={image}\n                                        alt=\"Work Proof\"\n                                        className=\"w-full h-auto max-h-[500px] object-cover transform group-hover/image:scale-105 transition-transform duration-700 ease-out\"\n                                    />\n                                </div>\n                            )}\n\n                            {/* Action Bar - Modern Pills */}\n                            <div className=\"flex items-center gap-4 mt-2\">\n                                <button\n                                    onClick={(e) => {\n                                        e.stopPropagation();\n                                        handleLike();\n                                    }}\n                                    className={cn(\n                                        \"group flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300 border border-transparent\",\n                                        isLiked\n                                            ? \"bg-pink-500/10 text-pink-500 border-pink-500/20\"\n                                            : \"bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-white hover:border-white/10\"\n                                    )}\n                                >\n                                    <motion.div whileTap={{ scale: 0.8 }}>\n                                        <Heart className={cn(\"h-4 w-4 transition-transform group-hover:scale-110\", isLiked && \"fill-current\")} />\n                                    </motion.div>\n                                    <span className=\"text-sm font-bold\">{likeCount}</span>\n                                </button>\n\n                                <button\n                                    onClick={() => setIsCommentsOpen(true)}\n                                    className=\"group flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-white transition-all duration-300 border border-transparent hover:border-white/10\"\n                                >\n                                    <MessageCircle className=\"h-4 w-4 group-hover:scale-110 transition-transform\" />\n                                    <span className=\"text-sm font-bold\">{stats.comments}</span>\n                                </button>\n\n                                <button className=\"group flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-green-400 transition-all duration-300 border border-transparent hover:border-green-500/20 ml-auto\">\n                                    <Share2 className=\"h-4 w-4 group-hover:scale-110 transition-transform\" />\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <CommentDrawer\n                postId={id}\n                isOpen={isCommentsOpen}\n                onClose={() => setIsCommentsOpen(false)}\n                onCommentAdded={() => {\n                    // Start of future enhancement: Update local comment count\n                }}\n            />\n        </motion.div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/components/feed/StoriesSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { createClient } from \"@/lib/supabase/client\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Plus, UploadCloud, X } from \"lucide-react\";\nimport { useEffect, useRef, useState } from \"react\";\n\n// Types\ntype StoryType = 'image' | 'text';\n\ninterface Story {\n  id: string;\n  userId: string;\n  userName: string;\n  userAvatar: string;\n  content: string; // Image URL or Text content\n  type: StoryType;\n  bgColor?: 'black' | 'white' | 'gradient';\n  timestamp: string;\n}\n\ninterface UserWithStories {\n  userId: string;\n  userName: string;\n  userAvatar: string;\n  stories: Story[];\n  isCurrentUser?: boolean;\n}\n\nexport function StoriesSection() {\n  const [stories, setStories] = useState<UserWithStories[]>([]);\n  const [selectedUserIndex, setSelectedUserIndex] = useState<number | null>(null);\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\n  const [isCreating, setIsCreating] = useState(false);\n  const supabase = createClient();\n\n  // Creation State\n  const [createType, setCreateType] = useState<StoryType>('text');\n  const [textContent, setTextContent] = useState(\"\");\n  const [textBg, setTextBg] = useState<'black' | 'white' | 'gradient'>('gradient');\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const fetchStories = async () => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    const { data: storiesData, error } = await supabase\n      .from('stories')\n      .select(`\n        *,\n        profiles (full_name, username, avatar_url)\n      `)\n      .gt('expires_at', new Date().toISOString())\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error(\"Error fetching stories:\", error);\n      return;\n    }\n\n    const groupedStories: { [key: string]: UserWithStories } = {};\n\n    // Current User Placeholder\n    groupedStories[user.id] = {\n      userId: user.id,\n      userName: \"You\",\n      userAvatar: user.user_metadata.avatar_url || \"\",\n      stories: [],\n      isCurrentUser: true\n    };\n\n    storiesData?.forEach((story: any) => {\n      const userId = story.user_id;\n      if (!groupedStories[userId]) {\n        groupedStories[userId] = {\n          userId: userId,\n          userName: story.profiles?.full_name || \"User\",\n          userAvatar: story.profiles?.avatar_url || \"\",\n          stories: [],\n          isCurrentUser: userId === user.id\n        };\n      }\n\n      groupedStories[userId].stories.push({\n        id: story.id,\n        userId: userId,\n        userName: story.profiles?.full_name || \"User\",\n        userAvatar: story.profiles?.avatar_url || \"\",\n        content: story.content || story.media_url,\n        type: story.type,\n        bgColor: story.background_color,\n        timestamp: new Date(story.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n      });\n    });\n\n    const storiesArray = Object.values(groupedStories).sort((a, b) => {\n      if (a.isCurrentUser) return -1;\n      if (b.isCurrentUser) return 1;\n      return 0;\n    });\n\n    setStories(storiesArray);\n  };\n\n  useEffect(() => {\n    fetchStories();\n\n    // Subscribe to realtime stories\n    const channel = supabase\n      .channel('realtime_stories')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'stories' }, () => {\n        fetchStories();\n      })\n      .subscribe();\n\n    return () => { supabase.removeChannel(channel); };\n  }, []);\n\n  const handleUserClick = (index: number) => {\n    if (stories[index].isCurrentUser && stories[index].stories.length === 0) {\n      setIsCreating(true);\n    } else {\n      setSelectedUserIndex(index);\n      setCurrentStoryIndex(0);\n    }\n  };\n\n  const handleNextStory = () => {\n    if (selectedUserIndex === null) return;\n    const currentUserStories = stories[selectedUserIndex].stories;\n    if (currentStoryIndex < currentUserStories.length - 1) {\n      setCurrentStoryIndex(prev => prev + 1);\n    } else {\n      // Next User\n      if (selectedUserIndex < stories.length - 1) {\n        let nextIndex = selectedUserIndex + 1;\n        while (nextIndex < stories.length && stories[nextIndex].stories.length === 0) {\n          nextIndex++;\n        }\n        if (nextIndex < stories.length) {\n          setSelectedUserIndex(nextIndex);\n          setCurrentStoryIndex(0);\n        } else {\n          closeViewer();\n        }\n      } else {\n        closeViewer();\n      }\n    }\n  };\n\n  const handlePrevStory = () => {\n    if (selectedUserIndex === null) return;\n    if (currentStoryIndex > 0) {\n      setCurrentStoryIndex(prev => prev - 1);\n    } else {\n      // Prev User\n      if (selectedUserIndex > 0) {\n        let prevIndex = selectedUserIndex - 1;\n        while (prevIndex >= 0 && stories[prevIndex].stories.length === 0) {\n          prevIndex--;\n        }\n        if (prevIndex >= 0) {\n          setSelectedUserIndex(prevIndex);\n          setCurrentStoryIndex(stories[prevIndex].stories.length - 1);\n        } else {\n          closeViewer();\n        }\n      } else {\n        closeViewer();\n      }\n    }\n  };\n\n  const closeViewer = () => {\n    setSelectedUserIndex(null);\n    setCurrentStoryIndex(0);\n  };\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handlePostStory = async () => {\n    setIsUploading(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error(\"Not authenticated\");\n\n      let mediaUrl = null;\n\n      if (createType === 'image' && imageFile) {\n        const fileExt = imageFile.name.split('.').pop();\n        const fileName = `${user.id}/${Math.random()}.${fileExt}`;\n        const { error: uploadError } = await supabase.storage\n          .from('story-media')\n          .upload(fileName, imageFile);\n\n        if (uploadError) throw uploadError;\n\n        const { data: { publicUrl } } = supabase.storage\n          .from('story-media')\n          .getPublicUrl(fileName);\n\n        mediaUrl = publicUrl;\n      }\n\n      const { error } = await supabase\n        .from('stories')\n        .insert({\n          user_id: user.id,\n          type: createType,\n          content: createType === 'text' ? textContent : null,\n          media_url: mediaUrl,\n          background_color: createType === 'text' ? textBg : null,\n          expires_at: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()\n        });\n\n      if (error) throw error;\n\n      await fetchStories();\n      setIsCreating(false);\n      resetCreation();\n    } catch (error) {\n      console.error(\"Error posting story:\", error);\n      alert(\"Failed to post story\");\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const resetCreation = () => {\n    setTextContent(\"\");\n    setTextBg(\"gradient\");\n    setImageFile(null);\n    setImagePreview(null);\n    setCreateType(\"text\");\n  };\n\n  const currentUser = stories[selectedUserIndex || 0];\n  const currentStory = currentUser?.stories[currentStoryIndex];\n\n  if (stories.length === 0) return null;\n\n  return (\n    <div className=\"w-full py-6 overflow-x-auto no-scrollbar\">\n      <div className=\"flex gap-5 px-4 min-w-max\">\n        {/* Create Story Button */}\n        <motion.div\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          className=\"flex flex-col items-center gap-2 cursor-pointer group\"\n          onClick={() => handleUserClick(0)}\n        >\n          <div className=\"relative w-[72px] h-[72px] rounded-full p-[3px] bg-gradient-to-tr from-purple-500 via-pink-500 to-orange-500\">\n            {/* If user has no stories, show dashed border instead of gradient maybe? No, Instagram keeps gradient if you want to add more. Let's keep it distinctive. */}\n            {stories[0].stories.length === 0 && (\n              <div className=\"absolute inset-0 bg-background rounded-full m-[2px]\" />\n            )}\n\n            <div className=\"w-full h-full rounded-full overflow-hidden border-[3px] border-background relative z-10\">\n              {stories[0].userAvatar ? (\n                <img\n                  src={stories[0].userAvatar}\n                  alt=\"You\"\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full bg-neutral-800 flex items-center justify-center text-xs font-bold\">You</div>\n              )}\n\n              {stories[0].stories.length === 0 && (\n                <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center\">\n                  <Plus className=\"w-6 h-6 text-white drop-shadow-md\" />\n                </div>\n              )}\n            </div>\n\n            {stories[0].stories.length > 0 && (\n              <div className=\"absolute bottom-0 right-0 z-20 bg-blue-500 text-white p-0.5 rounded-full border-2 border-background\">\n                <Plus className=\"w-3 h-3\" />\n              </div>\n            )}\n          </div>\n          <span className=\"text-xs text-white/90 font-medium\">Your Flow</span>\n        </motion.div>\n\n        {/* Story Circles */}\n        {stories.slice(1).map((user, index) => (\n          <motion.div\n            key={user.userId}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            className=\"flex flex-col items-center gap-2 cursor-pointer\"\n            onClick={() => handleUserClick(index + 1)}\n          >\n            <div className=\"relative w-[72px] h-[72px] rounded-full p-[3px] bg-gradient-to-tr from-cyan-400 via-blue-500 to-purple-600\">\n              <div className=\"w-full h-full rounded-full overflow-hidden border-[3px] border-background\">\n                {user.userAvatar ? (\n                  <img\n                    src={user.userAvatar}\n                    alt={user.userName}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-full h-full bg-neutral-800 flex items-center justify-center text-xs font-bold\">{user.userName[0]}</div>\n                )}\n              </div>\n            </div>\n            <span className=\"text-xs text-muted-foreground font-medium max-w-[70px] truncate\">{user.userName}</span>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Modern Creation Modal */}\n      <AnimatePresence>\n        {isCreating && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            className=\"fixed inset-0 z-[60] bg-black/95 backdrop-blur-md flex items-center justify-center p-4 sm:p-8\"\n          >\n            <div className=\"w-full max-w-2xl bg-neutral-900 rounded-3xl overflow-hidden border border-white/10 shadow-2xl relative flex flex-col h-[85vh]\">\n\n              {/* Top Bar */}\n              <div className=\"absolute top-0 left-0 right-0 p-6 flex justify-between items-center z-20\">\n                <h2 className=\"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60\">\n                  {createType === 'text' ? 'Create Note' : 'Upload Media'}\n                </h2>\n                <button onClick={() => { setIsCreating(false); resetCreation(); }} className=\"p-2 hover:bg-white/10 rounded-full transition-colors\">\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              {/* Main Canvas */}\n              <div className=\"flex-1 relative flex items-center justify-center bg-neutral-950/50\">\n                {createType === 'text' ? (\n                  <motion.div\n                    initial={{ opacity: 0 }} animate={{ opacity: 1 }}\n                    className={`w-full h-full flex items-center justify-center p-12 transition-colors duration-500 \n                                ${textBg === 'white' ? 'bg-white text-black' :\n                        textBg === 'gradient' ? 'bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white' :\n                          'bg-neutral-900 text-white'}`}\n                  >\n                    <textarea\n                      value={textContent}\n                      onChange={(e) => setTextContent(e.target.value)}\n                      placeholder=\"Type something...\"\n                      className=\"w-full h-full bg-transparent border-none resize-none focus:ring-0 text-3xl md:text-5xl font-bold text-center placeholder:text-current/50 outline-none\"\n                      autoFocus\n                    />\n                  </motion.div>\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center bg-neutral-900 relative\">\n                    {imagePreview ? (\n                      <div className=\"relative w-full h-full\">\n                        <img src={imagePreview} alt=\"Preview\" className=\"w-full h-full object-contain\" />\n                        <button\n                          onClick={() => { setImagePreview(null); setImageFile(null); }}\n                          className=\"absolute top-4 right-4 bg-black/60 p-2 rounded-full hover:bg-black/80 text-white\"\n                        >\n                          <X className=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                    ) : (\n                      <motion.label\n                        whileHover={{ scale: 1.02 }}\n                        whileTap={{ scale: 0.98 }}\n                        className=\"flex flex-col items-center justify-center gap-4 cursor-pointer p-12 rounded-3xl border-2 border-dashed border-white/10 hover:border-white/30 hover:bg-white/5 transition-all w-3/4 aspect-square max-h-[400px]\"\n                      >\n                        <div className=\"w-20 h-20 rounded-full bg-white/5 flex items-center justify-center\">\n                          <UploadCloud className=\"w-10 h-10 text-primary\" />\n                        </div>\n                        <div className=\"text-center\">\n                          <h3 className=\"text-lg font-bold\">Upload Photo</h3>\n                          <p className=\"text-sm text-muted-foreground mt-1\">PNG, JPG up to 10MB</p>\n                        </div>\n                        <input\n                          type=\"file\"\n                          ref={fileInputRef}\n                          accept=\"image/*\"\n                          className=\"hidden\"\n                          onChange={handleImageUpload}\n                        />\n                      </motion.label>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Bottom Controls */}\n              <div className=\"p-6 bg-neutral-900 border-t border-white/5 flex flex-col gap-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex gap-2 p-1 bg-black/40 rounded-xl\">\n                    <button\n                      onClick={() => setCreateType('text')}\n                      className={`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${createType === 'text' ? 'bg-white text-black shadow-lg' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                      Text\n                    </button>\n                    <button\n                      onClick={() => setCreateType('image')}\n                      className={`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${createType === 'image' ? 'bg-white text-black shadow-lg' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                      Image\n                    </button>\n                  </div>\n\n                  {createType === 'text' && (\n                    <div className=\"flex gap-3\">\n                      {['gradient', 'black', 'white'].map((bg) => (\n                        <button\n                          key={bg}\n                          onClick={() => setTextBg(bg as any)}\n                          className={`w-8 h-8 rounded-full border-2 transition-all ${textBg === bg ? 'border-primary ring-2 ring-primary/30' : 'border-white/20'}`}\n                          style={{\n                            background: bg === 'gradient' ? 'linear-gradient(to bottom right, #6366f1, #a855f7, #ec4899)' : bg\n                          }}\n                        />\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                <button\n                  onClick={handlePostStory}\n                  disabled={(createType === 'text' ? !textContent : !imagePreview) || isUploading}\n                  className=\"w-full py-4 bg-primary text-white rounded-2xl font-bold text-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-primary/25\"\n                >\n                  {isUploading ? \"Sharing to Flow...\" : \"Share Now\"}\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Immersive Story Viewer */}\n      <AnimatePresence>\n        {selectedUserIndex !== null && currentStory && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-[70] bg-black\"\n          >\n            {/* Story Content */}\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              {currentStory.type === 'text' ? (\n                <div\n                  className={`w-full h-full flex items-center justify-center p-8 text-center`}\n                  style={{\n                    background: currentStory.bgColor === 'gradient'\n                      ? 'linear-gradient(to bottom right, #6366f1, #a855f7, #ec4899)'\n                      : currentStory.bgColor === 'white' ? 'white' : 'black',\n                    color: currentStory.bgColor === 'white' ? 'black' : 'white'\n                  }}\n                >\n                  <p className=\"text-3xl md:text-5xl font-bold whitespace-pre-wrap max-w-4xl leading-tight\">\n                    {currentStory.content}\n                  </p>\n                </div>\n              ) : (\n                <img src={currentStory.content} className=\"w-full h-full object-contain\" alt=\"Story\" />\n              )}\n            </div>\n\n            {/* Overlays */}\n            <div className=\"absolute inset-x-0 top-0 pt-4 px-4 bg-gradient-to-b from-black/60 to-transparent pb-24 z-20\">\n              {/* Progress Bar */}\n              <div className=\"flex gap-1.5 mb-4\">\n                {currentUser.stories.map((story, idx) => (\n                  <div key={story.id} className=\"h-0.5 flex-1 bg-white/20 rounded-full overflow-hidden\">\n                    <motion.div\n                      initial={{ width: 0 }}\n                      animate={{ width: idx < currentStoryIndex ? \"100%\" : idx === currentStoryIndex ? \"100%\" : \"0%\" }}\n                      transition={{ duration: idx === currentStoryIndex ? 5 : 0, ease: \"linear\" }}\n                      onAnimationComplete={() => {\n                        if (idx === currentStoryIndex) handleNextStory();\n                      }}\n                      className=\"h-full bg-white shadow-[0_0_10px_white]\"\n                    />\n                  </div>\n                ))}\n              </div>\n\n              {/* Header */}\n              <div className=\"flex justify-between items-center\">\n                <div className=\"flex items-center gap-3\">\n                  {currentUser.userAvatar ? (\n                    <img src={currentUser.userAvatar} className=\"w-10 h-10 rounded-full border border-white/20\" />\n                  ) : (\n                    <div className=\"w-10 h-10 rounded-full bg-neutral-800 flex items-center justify-center font-bold\">{currentUser.userName[0]}</div>\n                  )}\n                  <div>\n                    <p className=\"font-bold text-white text-sm\">{currentUser.userName}</p>\n                    <p className=\"text-xs text-white/60\">{currentStory.timestamp}</p>\n                  </div>\n                </div>\n                <button onClick={closeViewer} className=\"p-2 hover:bg-white/10 rounded-full\">\n                  <X className=\"w-6 h-6 text-white\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Navigation Zones */}\n            <div className=\"absolute inset-0 z-10 grid grid-cols-[1fr_2fr_1fr]\">\n              <div onClick={handlePrevStory} className=\"h-full\" />\n              <div onClick={handleNextStory} className=\"h-full\" />\n              <div onClick={handleNextStory} className=\"h-full\" />\n            </div>\n\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2085, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayush/Flow-media/src/app/%28main%29/feed/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { CreatePost } from \"@/components/feed/CreatePost\";\nimport { FeedPost } from \"@/components/feed/FeedPost\";\nimport { StoriesSection } from \"@/components/feed/StoriesSection\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Loader2, Sparkles } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\n\ninterface PostWithData {\n    id: string;\n    content: string;\n    image_url: string | null;\n    created_at: string;\n    profiles: {\n        full_name: string;\n        username: string;\n        avatar_url: string;\n    };\n    tasks: {\n        id: string;\n        text: string;\n        is_completed: boolean;\n    }[];\n    likes: { count: number }[]; // Aggregate\n    comments: { count: number }[]; // Aggregate\n}\n\nexport default function FeedPage() {\n    const [posts, setPosts] = useState<PostWithData[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [currentUserId, setCurrentUserId] = useState<string | undefined>(undefined);\n    const [activeTab, setActiveTab] = useState<'foryou' | 'following'>('foryou');\n    const supabase = createClient();\n\n    const fetchPosts = async () => {\n        setLoading(true);\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (user) setCurrentUserId(user.id);\n\n            let query = supabase\n                .from('posts')\n                .select(`\n                    *,\n                    profiles (full_name, username, avatar_url),\n                    tasks (id, text, is_completed),\n                    likes (count),\n                    comments (count)\n                `)\n                .order('created_at', { ascending: false });\n\n            if (activeTab === 'following' && user) {\n                // Fetch followings first\n                const { data: follows } = await supabase\n                    .from('follows')\n                    .select('following_id')\n                    .eq('follower_id', user.id);\n\n                const followingIds = follows?.map(f => f.following_id) || [];\n\n                if (followingIds.length > 0) {\n                    query = query.in('user_id', followingIds);\n                } else {\n                    // Following no one, return empty\n                    setPosts([]);\n                    setLoading(false);\n                    return;\n                }\n            }\n\n            const { data, error } = await query;\n\n            if (error) throw error;\n            // @ts-ignore\n            setPosts(data || []);\n        } catch (error) {\n            console.error(\"Error fetching posts:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchPosts();\n\n        const channel = supabase\n            .channel('realtime posts')\n            .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'posts' }, (payload) => {\n                fetchPosts();\n            })\n            .subscribe();\n\n        return () => {\n            supabase.removeChannel(channel);\n        };\n    }, [activeTab]); // Refetch when tab changes\n\n    return (\n        <div className=\"w-full pb-20\">\n            <div className=\"sticky top-0 z-20 bg-black/60 backdrop-blur-xl border-b border-white/5 px-4 py-3 flex items-center justify-between\">\n                <div className=\"flex gap-6\">\n                    <button\n                        onClick={() => setActiveTab('foryou')}\n                        className={`font-bold text-lg pb-1 transition-colors ${activeTab === 'foryou' ? 'text-white border-b-2 border-primary' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                        For You\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('following')}\n                        className={`font-bold text-lg pb-1 transition-colors ${activeTab === 'following' ? 'text-white border-b-2 border-primary' : 'text-muted-foreground hover:text-white'}`}\n                    >\n                        Following\n                    </button>\n                </div>\n            </div>\n\n            <StoriesSection />\n\n            <CreatePost onPostCreated={fetchPosts} />\n\n            <div className=\"mt-6 space-y-6\">\n                {loading ? (\n                    <div className=\"flex justify-center py-12\">\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                    </div>\n                ) : posts.length > 0 ? (\n                    posts.map((post) => (\n                        <FeedPost\n                            key={post.id}\n                            id={post.id}\n                            userId={\n                                // @ts-ignore\n                                post.user_id\n                            }\n                            currentUserId={currentUserId}\n                            user={{\n                                name: post.profiles?.full_name || 'Unknown User',\n                                handle: post.profiles?.username || 'user',\n                                avatar: post.profiles?.avatar_url || ''\n                            }}\n                            timestamp={new Date(post.created_at).toLocaleDateString()}\n                            content={post.content}\n                            tasks={post.tasks?.map(t => ({ id: t.id, text: t.text, completed: t.is_completed })) || []}\n                            image={post.image_url || undefined}\n                            stats={{\n                                // @ts-ignore\n                                likes: post.likes?.[0]?.count || 0,\n                                // @ts-ignore \n                                comments: post.comments?.[0]?.count || 0\n                            }}\n                        />\n                    ))\n                ) : (\n                    <div className=\"text-center py-20 px-4\">\n                        <div className=\"h-16 w-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            <Sparkles className=\"h-8 w-8 text-muted-foreground\" />\n                        </div>\n                        <h3 className=\"text-xl font-bold text-white mb-2\">\n                            {activeTab === 'following' ? \"No following posts\" : \"No flows yet\"}\n                        </h3>\n                        <p className=\"text-muted-foreground max-w-sm mx-auto\">\n                            {activeTab === 'following'\n                                ? \"Follow some creators to see their flows here.\"\n                                : \"Be the first to share your daily flow! Use the input above to create a post.\"}\n                        </p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAPA;;;;;;;;AA4Be,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAqB;IACvE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAyB;IACnE,MAAM,WAAW,IAAA,gJAAY;IAE7B,MAAM,aAAa;QACf,WAAW;QACX,IAAI;YACA,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,MAAM,iBAAiB,KAAK,EAAE;YAElC,IAAI,QAAQ,SACP,IAAI,CAAC,SACL,MAAM,CAAC,CAAC;;;;;;gBAMT,CAAC,EACA,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE5C,IAAI,cAAc,eAAe,MAAM;gBACnC,yBAAyB;gBACzB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,WACL,MAAM,CAAC,gBACP,EAAE,CAAC,eAAe,KAAK,EAAE;gBAE9B,MAAM,eAAe,SAAS,IAAI,CAAA,IAAK,EAAE,YAAY,KAAK,EAAE;gBAE5D,IAAI,aAAa,MAAM,GAAG,GAAG;oBACzB,QAAQ,MAAM,EAAE,CAAC,WAAW;gBAChC,OAAO;oBACH,iCAAiC;oBACjC,SAAS,EAAE;oBACX,WAAW;oBACX;gBACJ;YACJ;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;YAE9B,IAAI,OAAO,MAAM;YACjB,aAAa;YACb,SAAS,QAAQ,EAAE;QACvB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;QAC3C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,kNAAS,EAAC;QACN;QAEA,MAAM,UAAU,SACX,OAAO,CAAC,kBACR,EAAE,CAAC,oBAAoB;YAAE,OAAO;YAAU,QAAQ;YAAU,OAAO;QAAQ,GAAG,CAAC;YAC5E;QACJ,GACC,SAAS;QAEd,OAAO;YACH,SAAS,aAAa,CAAC;QAC3B;IACJ,GAAG;QAAC;KAAU,GAAG,2BAA2B;IAE5C,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BACG,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,yCAAyC,EAAE,cAAc,WAAW,yCAAyC,0CAA0C;sCACtK;;;;;;sCAGD,8OAAC;4BACG,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,yCAAyC,EAAE,cAAc,cAAc,yCAAyC,0CAA0C;sCACzK;;;;;;;;;;;;;;;;;0BAMT,8OAAC,8JAAc;;;;;0BAEf,8OAAC,sJAAU;gBAAC,eAAe;;;;;;0BAE3B,8OAAC;gBAAI,WAAU;0BACV,wBACG,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC,4NAAO;wBAAC,WAAU;;;;;;;;;;2BAEvB,MAAM,MAAM,GAAG,IACf,MAAM,GAAG,CAAC,CAAC,qBACP,8OAAC,kJAAQ;wBAEL,IAAI,KAAK,EAAE;wBACX,QACI,aAAa;wBACb,KAAK,OAAO;wBAEhB,eAAe;wBACf,MAAM;4BACF,MAAM,KAAK,QAAQ,EAAE,aAAa;4BAClC,QAAQ,KAAK,QAAQ,EAAE,YAAY;4BACnC,QAAQ,KAAK,QAAQ,EAAE,cAAc;wBACzC;wBACA,WAAW,IAAI,KAAK,KAAK,UAAU,EAAE,kBAAkB;wBACvD,SAAS,KAAK,OAAO;wBACrB,OAAO,KAAK,KAAK,EAAE,IAAI,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,MAAM,EAAE,IAAI;gCAAE,WAAW,EAAE,YAAY;4BAAC,CAAC,MAAM,EAAE;wBAC1F,OAAO,KAAK,SAAS,IAAI;wBACzB,OAAO;4BACH,aAAa;4BACb,OAAO,KAAK,KAAK,EAAE,CAAC,EAAE,EAAE,SAAS;4BACjC,cAAc;4BACd,UAAU,KAAK,QAAQ,EAAE,CAAC,EAAE,EAAE,SAAS;wBAC3C;uBArBK,KAAK,EAAE;;;;8CAyBpB,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,sNAAQ;gCAAC,WAAU;;;;;;;;;;;sCAExB,8OAAC;4BAAG,WAAU;sCACT,cAAc,cAAc,uBAAuB;;;;;;sCAExD,8OAAC;4BAAE,WAAU;sCACR,cAAc,cACT,kDACA;;;;;;;;;;;;;;;;;;;;;;;AAOlC"}}]
}